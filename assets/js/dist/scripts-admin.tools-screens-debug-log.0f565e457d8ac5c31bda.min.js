"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[2668,5491],{43645:function(e,t,n){var r=n(71860),o=n(90455),a=n(88856),i=n(8140),c=n(78564),u=n.n(c),s=n(27122),l=n.n(s),d=n(32352),g=n(40388),p=n(21713),v=n(84860),b=n(5529),f=n(96343),m=n(76910),h=n(83391),_=n(61916),y=n(43054),A=n(83707),O=n(93313),j=n(63531),P=n(79929),w=n(52014);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var S=d.q_.forwardRef,x=d.q_.useEffect,k=d.q_.useRef,L=d.q_.useState,C=d.tm.useLocation,T=d.tm.useNavigate,E=d.tm.useSearchParams,I="log_page",B="search_term",R=new URLSearchParams(window.location.search),q=R.get(I)||"1",N=R.get(B)||"",z=S(function(e,t){var n=e.customAttributes,c=void 0===n?{}:n,s=e.customClasses,S=void 0===s?[]:s,R=e.common,z=void 0===R?{}:R,M=e.data,G=void 0===M?{}:M,H=e.i18n,J=void 0===H?{}:H,U=z.endpoints,F=(void 0===U?{}:U).debug_log_page,K=F.action,Q=void 0===K?"":K,V=F.nonce,W=void 0===V?"":V,X=J||{},Y=X.debug_log,Z=void 0===Y?{}:Y,$=Z.top_heading,ee=void 0===$?"":$,te=Z.data_grid,ne=void 0===te?{}:te,re=ne.top_heading,oe=void 0===re?"":re,ae=ne.clear_search_aria_label,ie=void 0===ae?"":ae,ce=ne.empty_title,ue=void 0===ce?"":ce,se=ne.empty_message,le=void 0===se?"":se,de=ne.grid_controls_search_button_label,ge=void 0===de?"":de,pe=ne.grid_controls_search_placeholder,ve=void 0===pe?"":pe,be=ne.pagination_next,fe=void 0===be?"":be,me=ne.pagination_prev,he=void 0===me?"":me,_e=ne.pagination_next_aria_label,ye=void 0===_e?"":_e,Ae=ne.pagination_prev_aria_label,Oe=void 0===Ae?"":Ae,je=ne.search_no_results_title,Pe=void 0===je?"":je,we=ne.search_no_results_message,De=void 0===we?"":we,Se=Z.snackbar_debug_log_error,xe=void 0===Se?"":Se,ke=X.debug_messages,Le=void 0===ke?{}:ke,Ce=Le.fetching_debug_log_page,Te=void 0===Ce?"":Ce,Ee=Le.fetching_debug_log_page_error,Ie=void 0===Ee?"":Ee,Be=(null==G?void 0:G.debug_log)||{},Re=Be.data_grid,qe=void 0===Re?{}:Re,Ne=qe.columns,ze=void 0===Ne?[]:Ne,Me=qe.column_style_props,Ge=void 0===Me?{}:Me,He=qe.data,Je=void 0===He?[]:He,Ue=Be.initial_load_timestamp,Fe=void 0===Ue?"":Ue,Ke=Be.initial_row_count,Qe=void 0===Ke?0:Ke,Ve=Be.rows_per_page,We=void 0===Ve?7:Ve,Xe=(null==G?void 0:G.caps)||{},Ye=C(),Ze=T(),$e=(0,v.dh)(),et=E(),tt=(0,i.A)(et,2),nt=tt[0],rt=(tt[1],L(Je.length>0?We:7)),ot=(0,i.A)(rt,2),at=ot[0],it=ot[1],ct=L(Qe),ut=(0,i.A)(ct,2),st=ut[0],lt=ut[1],dt=(0,w.default)(function(e){return e.setDebugDetailsDialogData}),gt=(0,w.default)(function(e){return e.setDebugDetailsDialogOpen}),pt=k(),vt=k(!1),bt=(0,P.h)({page:q,searchTerm:N}),ft=(0,P.A)((0,a.A)({},bt,{rows:Je,totalRowCount:Qe})),mt=ft.pageCache,ht=ft.addPageCache;x(function(){if(pt.current)if(vt.current)vt.current=!1;else{var e=nt.get(I)||"1",t=parseInt(e,10)-1,n=nt.get(B)||"";At({currentPage:t,searchTerm:n},!0),Dt({currentPage:t,searchTerm:n,searchActive:""!==n})}else pt.current=!0},[nt]);var _t=function(e){var t=e.page,n=e.searchTerm,r=void 0===n?"":n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=new URLSearchParams(Ye.search);a.set(I,t),r?a.set(B,r):a.delete(B),Ze("?".concat(a.toString()),{replace:o})},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rows,n=void 0===t?[]:t,r=e.totalRowCount,o=void 0===r?0:r,a=n.length>0;it(a?We:7),Ct(n),lt(parseInt(o,10))},At=function(){var e=(0,o.A)(u().mark(function e(t){var n,r,o,a,i,c,s,d,v,b,f,m=arguments;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=m.length>1&&void 0!==m[1]&&m[1])||(vt.current=!0),r={page:t.currentPage+1,searchTerm:t.searchTerm},o=(0,P.h)(r),!mt[o]){e.next=8;break}return yt(mt[o]),_t(r,n),e.abrupt("return",t.currentPage);case 8:return a={action:Q,security:W,max_date:Fe,requested_page:t.currentPage+1,search_term:t.searchTerm||""},e.next=11,(0,A.A)((0,p.nv)(Te,JSON.stringify((0,O.A)(["security"],a))),"info");case 11:return e.prev=11,e.next=14,(0,g.bE)({endpoint:l(),body:a});case 14:if(d=e.sent,v=(null==d||null===(i=d.data)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.rows)||[],b=(null==d||null===(c=d.data)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.total)||"0",null==d||null===(s=d.data)||void 0===s||!s.success){e.next=23;break}return ht(o,f={rows:v,totalRowCount:b}),yt(f),_t(r,n),e.abrupt("return",t.currentPage);case 23:$e(xe,"error"),e.next=31;break;case 26:return e.prev=26,e.t0=e.catch(11),$e(e.t0.message,"error"),e.next=31,(0,A.A)((0,p.nv)(Ie,JSON.stringify(e.t0)),"error");case 31:case"end":return e.stop()}},e,null,[[11,26]])}));return function(t){return e.apply(this,arguments)}}(),Ot=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({className:(0,d.pS)({"gravitysmtp-tools-app__debug-log":!0},S)},c),jt=[_.hi,_.vj],Pt=(0,y.A)({data:Je,dataPerPage:We,initialState:{isLoading:!1,moduleState:{currentPage:parseInt(q,10)-1,searchTerm:N,searchActive:""!==N}},modules:jt,useAjax:!0}),wt=Pt.moduleState,Dt=Pt.updateModuleState,St=Pt.isLoading,xt=Pt.setIsLoading,kt=Pt.gridLocked,Lt=Pt.organizedData,Ct=Pt.setOrganizedData,Tt={customClasses:["gravitysmtp-tools-app__debug-log-table"],id:"gravitysmtp-tools-app__debug-log-table",columns:(0,j.A)(ze),columnStyleProps:Ge,data:(0,j.A)(Lt),dataPerPage:at,EmptyImage:f.A,gridLocked:kt,handleGridClicks:function(e){if("view"===e.action){var t,n,r,o,a=(null==e||null===(t=e.data)||void 0===t?void 0:t.id)||0,i=Lt.filter(function(e){var t;return(null==e||null===(t=e.id)||void 0===t||null===(t=t.props)||void 0===t?void 0:t.content)===a})[0];if(!i)return;dt({date:(null==i||null===(n=i.date)||void 0===n||null===(n=n.props)||void 0===n?void 0:n.content)||"",event:(null==i||null===(r=i.status)||void 0===r?void 0:r.props)||{},log:(null==i||null===(o=i.log)||void 0===o||null===(o=o.props)||void 0===o?void 0:o.label)||""}),gt(!0)}},i18n:{emptyMessageI18n:le,emptyTitleI18n:ue,gridHeadingI18n:oe},isLoading:St,maintainHeight:0===Lt.length,modules:jt,moduleAttributes:{pagination:{nextLabel:fe,nextAriaLabel:ye,onClick:At,pageCount:Math.ceil(st/at),previousLabel:he,previousAriaLabel:Oe},search:{button:{customAttributes:{"data-test-id":"debug-log-search-trigger"},id:"debug-log-search-trigger",label:ge},input:{customAttributes:{"data-test-id":"debug-log-search-input"},clearableButtonAttributes:{ariaLabel:ie,icon:"x-circle",iconPrefix:"gravitysmtp-admin-icon"},id:"debug-log-search-input",placeholder:ve},noResults:{Image:m.A},i18n:{noResultsTitle:Pe,noResultsMessage:De},onSearch:At}},moduleState:wt,setIsLoading:xt,titleAttributes:{tagName:"h2"},updateModuleState:Dt,useAjax:!0};return Xe.gravitysmtp_view_debug_log&&d.q_.createElement("div",(0,r.A)({},Ot,{ref:t}),d.q_.createElement(b.A,{size:"display-sm",weight:"semibold",spacing:6,content:ee}),d.q_.createElement(h.A,Tt))});z.propTypes={customAttributes:d.By.object,customClasses:d.By.oneOfType([d.By.string,d.By.array,d.By.object]),common:d.By.object,data:d.By.object,i18n:d.By.object},z.displayName="DebugLogScreen",t.default=z},52014:function(e,t,n){var r,o=n(40450),a=n.n(o),i=n(91820),c=(null===(r=(0,n(21713).zj)(a(),"gravitysmtp_admin_config"))||void 0===r||null===(r=r.components)||void 0===r||r.tools,(0,i.vt)({debugDetailsDialogData:{},debugDetailsDialogOpen:!1},function(e){return{setDebugDetailsDialogData:function(t){return e(function(){return{debugDetailsDialogData:t}})},setDebugDetailsDialogOpen:function(t){return e(function(){return{debugDetailsDialogOpen:t}})}}}));t.default=c},63531:function(e,t,n){var r=n(88856),o=n(52888),a=n(30242),i=n(95892),c=n(5529),u=n(25980),s=n(25787),l=n(83852),d=n(27697),g=n(87029),p=n(85064),v=n(53377),b=n(66598),f=n(68347),m=n(16265),h=n(80509),_=n(43632),y=n(15635);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j={Box:a.A,Button:h.A,Checkbox:i.A,Gravatar:y.A,Heading:c.A,Icon:u.A,Input:s.A,InputGroup:l.A,Label:d.A,BasicLink:g.A,Radio:p.A,Select:v.A,StatusIndicator:_.A,Text:b.A,Textarea:f.A,Toggle:m.A},P=function(e){if("object"!==(0,o.A)(e)||null===e)return e;var t=O({},e);return t.component&&"string"==typeof t.component&&(t.component=j[t.component]||t.component),t.components&&Array.isArray(t.components)&&(t.components=t.components.map(P)),t};t.A=function(e){return Array.isArray(e)&&0!==e.length?"component"in e[0]?e.map(P):e.map(function(e){var t=O({},e);return Object.keys(t).forEach(function(e){t[e]=P(t[e])}),t}):e}},79929:function(e,t,n){n.d(t,{h:function(){return u}});var r=n(88856),o=n(8140);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c=n(32352).q_.useState,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?1:t,r=e.searchTerm,o=void 0===r?"":r,a=e.filters,i=void 0===a?"":a,c="page-".concat(n);return o&&(c+="-".concat(o)),i&&(c+="-".concat(i)),c};t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c(function(){return e}),n=(0,o.A)(t,2),a=n[0],u=n[1];return{pageCache:a,addPageCache:function(e,t){u(function(n){return i(i({},n),{},(0,r.A)({},e,t))})}}}},83707:function(e,t,n){n.d(t,{A:function(){return p}});var r,o=n(90455),a=n(78564),i=n.n(a),c=n(27122),u=n.n(c),s=n(40450),l=n.n(s),d=n(40388),g=(null===(r=(0,n(21713).zj)(l(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{};function p(){return v.apply(this,arguments)}function v(){return v=(0,o.A)(i().mark(function e(){var t,n,r,o,a,c,s,l,p,v,b=arguments;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b.length>0&&void 0!==b[0]?b[0]:"",o=b.length>1&&void 0!==b[1]?b[1]:"debug",a=g.data,c=void 0===a?{}:a,s=g.endpoints,p=(null==(l=void 0===s?{}:s)||null===(t=l.log_debug_item)||void 0===t?void 0:t.action)||"",v=(null==l||null===(n=l.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=c&&c.debug_log_enabled&&p&&v&&r){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.bE)({endpoint:u(),body:{action:p,security:v,message:r,priority:o}}).catch(function(e){console.error(e)});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)})),v.apply(this,arguments)}},93313:function(e,t,n){var r=n(52888),o=n(8140);t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",n=function(a){return Object.entries(a).reduce(function(a,i){var c=(0,o.A)(i,2),u=c[0],s=c[1];return"object"===(0,r.A)(s)&&null!==s?a[u]=n(s):e.includes(u)?a[u]=null===s?null:t.repeat(s.length):a[u]=s,a},Array.isArray(a)?[]:{})};return n(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);