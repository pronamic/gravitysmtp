"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[4806],{27764:function(e,t,n){var a,s=n(40450),i=n.n(s),r=(null===(a=(0,n(21713).zj)(i(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{};t.A=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{iconPrefix:"gravitysmtp-admin-icon",locked:(null==r||null===(e=r.data)||void 0===e||null===(e=e.locked_settings)||void 0===e?void 0:e.includes(n))||a,lockedMessage:s||(null==r||null===(t=r.i18n)||void 0===t?void 0:t.setting_locked)||""}}},83707:function(e,t,n){n.d(t,{A:function(){return _}});var a,s=n(90455),i=n(78564),r=n.n(i),o=n(27122),l=n.n(o),c=n(40450),u=n.n(c),d=n(60177),m=(null===(a=(0,n(21713).zj)(u(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{};function _(){return p.apply(this,arguments)}function p(){return p=(0,s.A)(r().mark(function e(){var t,n,a,s,i,o,c,u,_,p,g=arguments;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g.length>0&&void 0!==g[0]?g[0]:"",s=g.length>1&&void 0!==g[1]?g[1]:"debug",i=m.data,o=void 0===i?{}:i,c=m.endpoints,_=(null==(u=void 0===c?{}:c)||null===(t=u.log_debug_item)||void 0===t?void 0:t.action)||"",p=(null==u||null===(n=u.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=o&&o.debug_log_enabled&&_&&p&&a){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.bE)({endpoint:l(),body:{action:_,security:p,message:a,priority:s}}).catch(function(e){console.error(e)});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)})),p.apply(this,arguments)}},91614:function(e,t,n){n.r(t);var a=n(71860),s=n(90455),i=n(8140),r=n(88856),o=n(78564),l=n.n(o),c=n(27122),u=n.n(c),d=n(97867),m=n(60177),_=n(21713),p=n(82263),g=n(30242),b=n(80509),f=n(5529),v=n(25787),h=n(53377),y=n(13379),A=n(84860),x=n(66598),R=n(16265),E=n(83707),w=n(93313),k=n(27764);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=d.React.forwardRef,j=d.React.useEffect,C=d.React.useLayoutEffect,T=d.React.useState,N=d.React.useRef,S=d.ReactRouter.useSearchParams,F=P(function(e,t){var n,r,o=e.customAttributes,c=void 0===o?{}:o,z=e.customClasses,P=void 0===z?[]:z,F=e.common,D=void 0===F?{}:F,J=e.data,W=void 0===J?{}:J,G=e.i18n,H=void 0===G?{}:G,I=O({className:(0,d.classnames)({"gravitysmtp-tools-app__send-a-test":!0},P)},c),L=H||{},M=L.debug_messages,V=M.sending_test_email,q=void 0===V?"":V,B=M.sending_test_email_error,K=void 0===B?"":B,Q=L.send_a_test,U=void 0===Q?{}:Q,X=U.top_heading,Y=U.top_content,Z=U.send_test_box_heading,$=U.send_test_box_input_label,ee=U.send_test_box_input_placeholder,te=U.send_test_box_input_description,ne=U.send_test_box_from_label,ae=U.send_test_box_from_placeholder,se=U.send_test_box_from_description,ie=U.send_test_box_send_with_label,re=U.send_test_box_send_with_description,oe=U.send_test_box_send_as_html_label,le=U.send_test_box_send_as_html_description,ce=U.send_test_box_alerts_button_label,ue=U.send_test_box_try_again_button_label,de=U.send_test_box_error_issue_heading,me=U.send_test_box_error_possible_reasons_heading,_e=U.send_test_box_error_recommended_steps_heading,pe=U.send_test_box_view_log_button_label,ge=U.send_test_box_copy_log_button_label,be=U.send_test_box_copy_log_success_message,fe=((null==D?void 0:D.data)||{}).test_mode_enabled,ve=(null==D?void 0:D.i18n)||{},he=ve.snackbar_send_test_mail_error,ye=ve.snackbar_send_test_mail_success,Ae=W.caps,xe=void 0===Ae?{}:Ae,Re=W.integrations,Ee=(void 0===Re?[]:Re).filter(function(e){return!e.data.disabled&&e.data.configured}),we=Ee.map(function(e){return{label:(null==e?void 0:e.title)||"",value:(null==e?void 0:e.id)||""}}),ke=!!Ee.length,ze=ke?Ee.find(function(e){return e.data.is_primary})||Ee[0]:{},Oe=fe||!ke,Pe=S(),je=(0,i.A)(Pe,2),Ce=je[0],Te=(je[1],Ce.get("integration")||""),Ne=T(!1),Se=(0,i.A)(Ne,2),Fe=Se[0],De=Se[1],Je=T(!1),We=(0,i.A)(Je,2),Ge=We[0],He=We[1],Ie=T({}),Le=(0,i.A)(Ie,2),Me=Le[0],Ve=Le[1],qe=T(""),Be=(0,i.A)(qe,2),Ke=Be[0],Qe=Be[1],Ue=T(""),Xe=(0,i.A)(Ue,2),Ye=Xe[0],Ze=Xe[1],$e=T(Te||(null==ze?void 0:ze.id)||""),et=(0,i.A)($e,2),tt=et[0],nt=et[1],at=T(!0),st=(0,i.A)(at,2),it=st[0],rt=st[1],ot=T(""),lt=(0,i.A)(ot,2),ct=lt[0],ut=lt[1],dt=(null==D||null===(n=D.endpoints)||void 0===n||null===(n=n.send_test)||void 0===n?void 0:n.action)||"",mt=(null==D||null===(r=D.endpoints)||void 0===r||null===(r=r.send_test)||void 0===r?void 0:r.nonce)||"",_t=N(!0),pt=N(null),gt=N(null),bt=N(null),ft=N(null),vt=N(null),ht=T(!1),yt=(0,i.A)(ht,2),At=yt[0],xt=yt[1],Rt=(0,d.classnames)({"gravitysmtp-tools-app__send-a-test-trigger--sending":Fe});j(function(){At&&vt.current&&(vt.current.focus(),xt(!1))},[At]),C(function(){_t.current?_t.current=!1:pt&&bt&&(Ge?bt.current.focus():pt.current&&pt.current.focus())},[Ge]);var Et=(0,A.dh)(),wt=function(){var e=(0,s.A)(l().mark(function e(){var t,n,a,s,i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Ke&&""!==tt){e.next=2;break}return e.abrupt("return");case 2:return ut(ft.current.offsetWidth),De(!0),t={action:dt,security:mt,email:Ke,connector_type:tt,as_html:it?"true":"false",from_email:Ye},e.next=7,(0,E.A)((0,_.nv)(q,JSON.stringify((0,w.A)(["security"],t))),"info");case 7:return e.prev=7,e.next=10,(0,m.bE)({endpoint:u(),body:t});case 10:a=e.sent,De(!1),null!=a&&null!==(n=a.data)&&void 0!==n&&n.success?Et(ye):null!=a&&null!==(s=a.error)&&void 0!==s&&null!==(s=s.detail)&&void 0!==s&&s.data?(i=(0,_.Fh)(a.error.detail.data)?JSON.parse(a.error.detail.data):"",(0,_.Gv)(i.data)?(Ve(i.data),He(!0)):Et(i.data||he,"error")):Et(he,"error"),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(7),Et(e.t0.message,"error"),e.next=20,(0,E.A)((0,_.nv)(K,JSON.stringify(e.t0)),"error");case 20:case"end":return e.stop()}},e,null,[[7,15]])}));return function(){return e.apply(this,arguments)}}(),kt=Ge?1200:630;return xe.gravitysmtp_view_tools_sendatest&&d.React.createElement("div",(0,a.A)({},I,{ref:t}),d.React.createElement(f.A,{size:"display-sm",weight:"semibold",spacing:1,content:X}),d.React.createElement(x.A,{size:"text-sm",spacing:6,color:"comet",content:Y}),d.React.createElement(y.A,{HeaderContent:function(e){return d.React.createElement(d.React.Fragment,null,d.React.createElement(f.A,(0,a.A)({content:Z,size:"text-lg",weight:"medium"},e)))},FooterContent:function(e){return Ge?d.React.createElement(b.A,(0,a.A)({label:ue,onClick:function(){He(!1),Qe(""),Ze(""),Ve({})},size:"size-height-m"},e)):d.React.createElement(b.A,(0,a.A)({active:Fe,activeType:"loader",customAttributes:{"data-test-id":"send-a-test-email-trigger",style:{width:"".concat(ct,"px")}},customClasses:Rt,disabled:Oe,icon:"paper-plane",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ce,onClick:wt,ref:ft,size:"size-height-m"},e))}},d.React.createElement(g.A,{x:kt},Ge?d.React.createElement(d.React.Fragment,null,d.React.createElement(g.A,{x:630},d.React.createElement(p.A,{theme:"cosmos",type:"error",customIconPrefix:"gravitysmtp-admin-icon",content:Me.error_message,spacing:[2,0,6,0]})),(null==Me?void 0:Me.issues)&&Me.issues.length>0&&Me.issues[0]&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.A,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:de}),d.React.createElement(x.A,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},Me.issues.map(function(e,t){return d.React.createElement("li",{key:"issues-".concat(t)},e)})))),(null==Me?void 0:Me.possible_reasons)&&Me.possible_reasons.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.A,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:me}),d.React.createElement(x.A,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},Me.possible_reasons.map(function(e,t){return d.React.createElement("li",{key:"possible-reasons-".concat(t)},e)})))),(null==Me?void 0:Me.recommended_steps)&&Me.recommended_steps.length>0&&d.React.createElement(d.React.Fragment,null,d.React.createElement(f.A,{size:"text-sm",tagName:"h5",weight:"medium",spacing:3,content:_e}),d.React.createElement(x.A,{size:"text-sm",spacing:5},d.React.createElement("ul",{className:"gform-list--bulleted"},Me.recommended_steps.map(function(e,t){return d.React.createElement("li",{key:"recommended-steps-".concat(t)},e)})))),d.React.createElement(g.A,{display:"flex",spacing:2},d.React.createElement(b.A,{label:pe,onClick:function(){window.location.href="//".concat(window.location.host).concat(window.location.pathname,"?page=gravitysmtp-activity-log&tab=log-details&event_id=").concat(Me.full_log.log_id)},size:"size-height-m",spacing:[0,3,0,0],type:"white",ref:bt}),d.React.createElement(b.A,{icon:"copy",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ge,onClick:function(){(0,_.Ns)(Me.log_copy),Et(be),xt(!0)},ref:vt,size:"size-height-m",type:"white"}))):d.React.createElement(d.React.Fragment,null,d.React.createElement(v.A,{labelAttributes:{label:$},helpTextAttributes:{content:te},placeholder:ee,onChange:function(e){return Qe(e)},type:"email",disabled:Oe,customAttributes:{"data-test-id":"send-a-test-email-input",ref:pt},spacing:6}),d.React.createElement(v.A,{labelAttributes:{label:ne},helpTextAttributes:{content:se},placeholder:ae,onChange:function(e){return Ze(e)},type:"email",disabled:Oe,customAttributes:{"data-test-id":"send-a-test-from-email",ref:gt},spacing:6}),ke&&d.React.createElement(h.A,{customAttributes:{"data-test-id":"send-a-test-integration"},initialValue:tt,labelAttributes:{label:ie},helpTextAttributes:{content:re},name:"integration",onChange:function(e){return nt(e)},options:we,disabled:Oe,spacing:6}),d.React.createElement(R.A,{customAttributes:{"data-test-id":"send-a-test-html"},initialChecked:it,labelAttributes:O({label:oe},(0,k.A)("send-a-test-html")),helpTextAttributes:{content:le,size:"text-sm"},helpTextWidth:"full",labelPosition:"left",id:"send-a-test-html",name:"send-a-test-html",onChange:function(e){return rt(e)},size:"size-m",width:"full",disabled:Oe})))))});F.propTypes={customAttributes:d.PropTypes.object,customClasses:d.PropTypes.oneOfType([d.PropTypes.string,d.PropTypes.array,d.PropTypes.object])},F.displayName="SendATestScreen",t.default=F},93313:function(e,t,n){var a=n(52888),s=n(8140);t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",n=function(i){return Object.entries(i).reduce(function(i,r){var o=(0,s.A)(r,2),l=o[0],c=o[1];return"object"===(0,a.A)(c)&&null!==c?i[l]=n(c):e.includes(l)?i[l]=null===c?null:t.repeat(c.length):i[l]=c,i},Array.isArray(i)?[]:{})};return n(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);