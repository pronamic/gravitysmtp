"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[4688,5394,6124,7199,9702],{19006:function(t,n,e){e.d(n,{default:function(){return F}});var i=e(71860),o=e(88856),r=e(90455),a=e(8140),s=e(78564),c=e.n(s),u=e(27122),l=e.n(u),d=e(32352),g=e(40388),p=e(21713),f=e(80509),m=e(5529),v=e(55899),_=e(84860),b=e(28099),y=e(83707),A=function(t){var n,e;return null!==(n=null===(e=t.find(function(t){var n;return null===(n=t.data)||void 0===n?void 0:n.is_primary}))||void 0===e?void 0:e.id)&&void 0!==n?n:""},h=e(93313),k=e(53015);function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.fromEntries(Object.entries(t).filter(function(t){var e=(0,a.A)(t,1)[0];return!(0,k.A)("".concat(n,"_").concat(e))}))}var C=e(55809),S=e(46716),E=e(59092);function w(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,i)}return e}function D(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?w(Object(e),!0).forEach(function(n){(0,o.A)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):w(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var I=d.q_.useCallback,j=d.q_.useEffect,q=d.q_.useState,x=d.q_.useRef,P=function(t){var n,e,o,s,u,k,w=t.common,P=void 0===w?{}:w,F=t.data,L=void 0===F?{}:F,B=t.i18n,z=void 0===B?{}:B,N=(null==z?void 0:z.integrations)||{},M=N.integration_settings_error,T=N.flyout,J=(void 0===T?{}:T).screen02,W=void 0===J?{}:J,G=W.back_button_label,H=void 0===G?"":G,R=W.save_button_label,X=void 0===R?"":R,U=W.save_enable_button_label,Y=void 0===U?"":U,Z=(null==P?void 0:P.i18n)||{},K=Z.debug_messages,Q=void 0===K?{}:K,V=Q.saving_integration_settings,$=void 0===V?"":V,tt=Q.saving_integration_settings_error,nt=void 0===tt?"":tt,et=Z.snackbar_api_save_success,it=void 0===et?"":et,ot=Z.snackbar_api_save_integration_enabled,rt=void 0===ot?"":ot,at=(0,E.default)(function(t){return t.activeIntegrationId}),st=(0,E.default)(function(t){return t.integrationsFlyoutState}),ct=(0,E.default)(function(t){return t.integrationSettingsFormData}),ut=(0,E.default)(function(t){return t.integrations}),lt=q(!1),dt=(0,a.A)(lt,2),gt=dt[0],pt=dt[1],ft=x(null),mt=(0,E.default)(function(t){return t.setSettingsFlyoutClosed}),vt=(0,E.default)(function(t){return t.updateIntegrationsFlyoutState}),_t=(0,E.default)(function(t){return t.updateIntegrationStatus}),bt=(0,E.default)(function(t){return t.setIntegrationSettingsFormData}),yt=I(function(t,n){return bt(at,t,n)},[at,bt]),At=(0,p.uN)(L,"id",at),ht=(null==At||null===(n=At.settings)||void 0===n?void 0:n.fields)||[],kt=(null==P||null===(e=P.endpoints)||void 0===e||null===(e=e.save_connector_settings)||void 0===e?void 0:e.action)||"",Ot=(null==P||null===(o=P.endpoints)||void 0===o||null===(o=o.save_connector_settings)||void 0===o?void 0:o.nonce)||"",Ct=(0,_.dh)(),St=(null==At||null===(s=At.settings)||void 0===s?void 0:s.hide_save)||!1,Et=(null===(u=ct[at])||void 0===u?void 0:u.from_email)||"";j(function(){Et||yt("force_from_email",!1)},[Et,yt]);var wt=(null===(k=ct[at])||void 0===k?void 0:k.reply_to_email)||"";j(function(){wt||yt("force_reply_to_email",!1)},[wt,yt]);var Dt=function(){var t=(0,r.A)(c().mark(function t(){var n,e,i,o,r,a,s,u;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return null!=ft&&ft.current&&(n=ft.current.offsetWidth,ft.current.style.width="".concat(n,"px")),pt(!0),e={action:kt,security:Ot,settings:O(ct[at],at),connector_type:at},t.next=5,(0,y.A)((0,p.nv)($,at,JSON.stringify((0,h.A)(["api_key","api_secret","server_api_token","password","security"],e))),"info");case 5:return t.prev=5,t.next=8,(0,g.bE)({endpoint:l(),body:e});case 8:null!=(o=t.sent)&&null!==(i=o.data)&&void 0!==i&&i.success?(r=D({configured:!0,enabled:!0},""===A(ut)&&{is_primary:!0}),Ct("add"===st.action?(0,p.nv)(rt,At.title):it),_t(at,r),(0,S.d)(at,kt,Ot,r),setTimeout(function(){mt()},1e3)):(u=(0,p.Fh)(null==o||null===(a=o.error)||void 0===a||null===(a=a.detail)||void 0===a?void 0:a.data)?JSON.parse(null==o||null===(s=o.error)||void 0===s||null===(s=s.detail)||void 0===s?void 0:s.data):"",Ct((null==u?void 0:u.data)||M,"error")),t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(5),t.next=16,(0,y.A)((0,p.nv)(nt,at,JSON.stringify(t.t0)),"error");case 16:console.error(t.t0);case 17:pt(!1),null!=ft&&ft.current&&(ft.current.style.width="");case 19:case"end":return t.stop()}},t,null,[[5,12]])}));return function(){return t.apply(this,arguments)}}(),It={size:"size-height-l",type:"white",label:H,onClick:function(){vt({screen:1})}},jt={activeType:"loader",active:gt,customAttributes:{"data-test-id":"integration-settings-save-button"},customClasses:(0,d.pS)({"gravitysmtp-integration-settings__save":!0,"gravitysmtp-integration-settings__save--saving":gt}),icon:"save-disk",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:"add"===st.action?Y:X,size:"size-height-l",type:"primary-new",onClick:Dt},qt={className:(0,d.pS)({"gravitysmtp-settings-app__integrations-flyout":!0})},xt=(0,b.A)(ht,{activeIntegrationId:at,integrationSettingsFormData:ct,saveConnectorSettings:Dt,savingSettings:gt,Svgs:C,i18n:null==P?void 0:P.i18n,addSnackBarMessage:Ct});return d.q_.createElement("div",qt,d.q_.createElement(m.A,{content:At.settings.title,size:"display-xs",spacing:3,tagName:"h2",weight:"semibold"}),d.q_.createElement("form",{id:at},d.q_.createElement(v.A,{id:at,fields:xt,setFieldData:yt})),d.q_.createElement("footer",{className:"gform-flyout__footer"},d.q_.createElement("div",{className:"gform-flyout__footer-right"},"add"===st.action&&d.q_.createElement(f.A,It),!St&&d.q_.createElement(f.A,(0,i.A)({},jt,{ref:ft})))))};P.propTypes={common:d.By.object,data:d.By.object,i18n:d.By.object};var F=P},25696:function(t,n,e){var i=e(18134),o=e(8140),r=e(32352),a=e(91820),s=e(80509),c=e(29549),u=e(5529),l=e(25787),d=e(87029),g=e(66598),p=e(2489),f=e(55809),m=e(59092),v=r.q_.useState,_=r.q_.useMemo,b=r.q_.useCallback;n.default=function(t){var n,e=t.i18n,y=void 0===e?{}:e,A=(0,m.default)(function(t){return t.integrations}),h=(0,m.default)(function(t){return t.updateIntegrationsFlyoutState}),k=(0,m.default)(function(t){return t.setActiveIntegrationId}),O=v(""),C=(0,o.A)(O,2),S=C[0],E=C[1],w=(null==y||null===(n=y.integrations)||void 0===n||null===(n=n.flyout)||void 0===n?void 0:n.screen01)||{},D=w.heading,I=void 0===D?"":D,j=w.description,q=void 0===j?"":j,x=w.search_placeholder,P=void 0===x?"":x,F=w.search_label,L=void 0===F?"":F,B=_(function(){return A.filter(function(t){var n;return!(null!==(n=t.data)&&void 0!==n&&n.enabled)})},[A]),z=_(function(){return(0,i.A)(B).sort(function(t,n){return t.title.localeCompare(n.title)})},[B]),N=_(function(){return function(t,n){if(!n)return t;var e=n.toLowerCase();return t.filter(function(t){return t.id.toLowerCase().includes(e)||t.title.toLowerCase().includes(e)})}(z,S)},[z,S]),M=_(function(){return{className:(0,r.pS)({"gravitysmtp-settings-app__integrations-flyout--screen-01":!0})}},[]),T=b(function(t){E(t)},[]),J=b(function(t){h({screen:2}),k(t)},[h,k]),W=b(function(t){var n=f["".concat(t.logo,"Logo")]||f.BrokenImage,e="integrations-flyout-card-title-".concat(t.id),i="integrations-flyout-card-description-".concat(t.id);return r.q_.createElement(c.A,{item:!0,key:"integration-".concat(t.id),customClasses:{"gravitysmtp-settings-app__integrations-flyout-card-grid-item":!0},customAttributes:{"data-test-id":"integration-card-".concat(t.id)},type:"fluid",width:12},r.q_.createElement(s.A,{type:"white",customClasses:["gravitysmtp-settings-app__integrations-flyout-card-button"],customAttributes:{"data-test-id":"integrations-flyout-card-button-".concat(t.id),"aria-labelledby":e,"aria-describedby":i},onClick:function(){return J(t.id)}}),r.q_.createElement(p.A,{contentAttributes:{spacing:[0,0,0,3]},count:t.description,countAttributes:{color:"comet",customAttributes:{id:i},size:"text-xs",weight:"regular"},customClasses:["gravitysmtp-settings-app__integrations-flyout-card"],customIcon:r.q_.createElement(n,{height:48,width:48}),title:t.title,titleAttributes:{customAttributes:{id:e},spacing:2,size:"text-sm",tagName:"h3",weight:"medium"}}))},[J]);return r.q_.createElement("div",M,r.q_.createElement(u.A,{content:I,size:"display-xs",spacing:3,tagName:"h2",weight:"semibold"}),r.q_.createElement(g.A,{color:"comet",size:"text-sm",spacing:6},r.q_.createElement(a.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:q,tokens:[{component:d.A,key:"suggest_link",props:{href:"https://roadmap.smtp.gravity.com/",target:"_blank"}}]})),r.q_.createElement(l.A,{labelAttributes:{customClasses:["gform-visually-hidden"],label:L},placeholder:P,spacing:4,value:S,onChange:T}),r.q_.createElement(c.A,{container:!0,wrap:!0,customClasses:["gravitysmtp-settings-app__integrations-flyout-card-grid"],justifyContent:"flex-start",rowSpacing:4},N.map(W)))}},27764:function(t,n,e){var i,o=e(40450),r=e.n(o),a=(null===(i=(0,e(21713).zj)(r(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};n.A=function(){var t,n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{iconPrefix:"gravitysmtp-admin-icon",locked:(null==a||null===(t=a.data)||void 0===t||null===(t=t.locked_settings)||void 0===t?void 0:t.includes(e))||i,lockedMessage:o||(null==a||null===(n=a.i18n)||void 0===n?void 0:n.setting_locked)||""}}},28099:function(t,n,e){var i=e(90455),o=e(88856),r=e(78564),a=e.n(r),s=e(32352),c=e(63662),u=e(12094),l=e(87029),d=e(25787),g=e(66598),p=e(21713),f=e(91820),m=e(27764);function v(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,i)}return e}function _(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?v(Object(e),!0).forEach(function(n){(0,o.A)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var b=function(t,n){return t.map(function(t){var e,i;if(null==t||null===(e=t.props)||void 0===e||!e.name)return t;var o="".concat(n,"_").concat(t.props.name),r=(null==t||null===(i=t.props)||void 0===i?void 0:i.labelAttributes)||{};return _(_({},t),{},{props:_(_({},t.props),{},{labelAttributes:_(_({},r),(0,m.A)(o))})})})},y=function(t,n){var e=n.integrationSettingsFormData[n.activeIntegrationId],i=new Map,o=function(t){if(!t)return!1;if(i.has(t))return i.get(t);var n=function(t){return/\S+@\S+\.\S+/.test(t)}(t);return i.set(t,n),n},r=o(null==e?void 0:e.from_email),a=o(null==e?void 0:e.reply_to_email);return t.map(function(t){var n,i=null==t||null===(n=t.props)||void 0===n?void 0:n.name;return"force_from_email"===i?_(_({},t),{},{props:_(_({},t.props),{},{externalControl:!0,externalChecked:null==e?void 0:e.force_from_email,disabled:!r})}):"force_reply_to_email"===i?_(_({},t),{},{props:_(_({},t.props),{},{externalControl:!0,externalChecked:null==e?void 0:e.force_reply_to_email,disabled:!a})}):t})},A=function(t,n){return t.map(function(t,e){var i;if(0!==e||"Alert"!==(null==t?void 0:t.component)||"google-alias-notice"!==(null==t||null===(i=t.props)||void 0===i?void 0:i.id))return t;var o=h((null==t?void 0:t.fields)||[],n);return _(_({},t),{},{fields:o})})},h=function(t,n){var e=n.integrationSettingsFormData[n.activeIntegrationId],o=t.map(function(t){if(!["BrandedButton","BrandedLink","CopyInput","LinkedHelpTextInput","LinkedText"].includes(t.component)||!t.external)return t;var o,r=n.i18n.snackbar_url_copied,m=void 0===r?"":r,v=n.Svgs[t.props.Svg],b=null,y={};switch(t.component){case"BrandedButton":b=c.A,y=_(_({},t.props),{},{disabled:!(null!=e&&e.client_id&&null!=e&&e.client_secret)||n.savingSettings,onClick:(o=(0,i.A)(a().mark(function t(i){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.preventDefault(),t.next=3,n.saveConnectorSettings();case 3:window.location.href="".concat(e.oauth_url,"?client_id=").concat(e.client_id).concat(e.oauth_params);case 4:case"end":return t.stop()}},t)})),function(t){return o.apply(this,arguments)}),Svg:s.q_.createElement(v,null)});break;case"BrandedLink":b=u.A,y=_(_({},t.props),{},{href:"wizard"===n.context?t.wizardHref:t.props.href,Svg:s.q_.createElement(v,null)});break;case"CopyInput":b=d.A,y=_(_({},t.props),{},{actionButtonAttributes:_(_({},t.props.actionButtonAttributes),{},{onClick:function(t,e){n.addSnackBarMessage(m),(0,p.Ns)(e)}})});break;case"LinkedHelpTextInput":b=d.A,y=_(_({},t.props),{},{helpTextAttributes:_(_({},t.props.helpTextAttributes),{},{content:s.q_.createElement(f.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:t.props.helpTextAttributes.content,tokens:t.links.map(function(t){return{component:l.A,key:t.key,props:t.props}})})})});break;case"LinkedText":b=g.A,y=_(_({},t.props),{},{content:s.q_.createElement(f.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:t.props.content,tokens:t.links.map(function(t){return{component:l.A,key:t.key,props:t.props}})})})}return _(_({},t),{},{component:b,props:y})});return o},k=function(t,n){var e=n.integrationSettingsFormData[n.activeIntegrationId];return t.map(function(t){var n;if("Input"!==t.component||!["username","password"].includes(null==t||null===(n=t.props)||void 0===n?void 0:n.name))return t;var i=_(_({},t.props),{},{disabled:!e.auth});return _(_({},t),{},{props:i})})},O=function(t){return t.map(function(t){var n,e=((null==t||null===(n=t.props)||void 0===n||null===(n=n.labelAttributes)||void 0===n?void 0:n.label)||"").toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),i=_(_({},t.props),{},{customAttributes:_(_({},t.props.customAttributes),{},{"data-test-id":"form-field-".concat(e)})});return _(_({},t),{},{props:i})})};n.A=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t),e=O(n),i=b(e,t.activeIntegrationId);if(!["microsoft","google","generic","amazon","zoho"].includes(t.activeIntegrationId))return i;var o=i;return"google"===t.activeIntegrationId&&(o=A(o,t)),["microsoft","google","amazon","zoho"].includes(t.activeIntegrationId)?o=h(o,t):"generic"===t.activeIntegrationId&&(o=k(o,t)),o}},46716:function(t,n,e){e.d(n,{d:function(){return N}});var i,o=e(71860),r=e(88856),a=e(27122),s=e.n(a),c=e(40450),u=e.n(c),l=e(32352),d=e(21713),g=e(40388),p=e(55809),f=e(30242),m=e(80509),v=e(29549),_=e(5529),b=e(80371),y=e(66598),A=e(83581),h=e(4842),k=e(46492),O=e(60661),C=e(84860),S=e(52636),E=e(83707),w=e(93313),D=e(59092);function I(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,i)}return e}function j(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?I(Object(e),!0).forEach(function(n){(0,r.A)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):I(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var q=(null===(i=(0,d.zj)(u(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{},x=l.q_.forwardRef,P=l.q_.memo,F=l.q_.useCallback,L=l.q_.useMemo,B=P(function(t){var n,e,i=t.actionItems,o=void 0===i?[]:i,r=t.common,a=void 0===r?{}:r,s=t.data,c=void 0===s?{}:s,u=t.integration,g=void 0===u?{}:u,p=t.i18n,f=void 0===p?{}:p,m=(0,D.default)(function(t){return t.integrations}),v=(0,D.default)(function(t){return t.setActiveIntegrationId}),_=(0,D.default)(function(t){return t.setConfirmDialogOpen}),b=(0,D.default)(function(t){return t.setConfirmDialogSettings}),y=(0,D.default)(function(t){return t.setIntegrationSettingsFormData}),h=(0,D.default)(function(t){return t.setIntegrationsFlyoutState}),k=(0,D.default)(function(t){return t.setSettingsFlyout}),O=(0,D.default)(function(t){return t.updateIntegrationStatus}),E=(null==a||null===(n=a.endpoints)||void 0===n||null===(n=n.save_connector_settings)||void 0===n?void 0:n.action)||"",w=(null==a||null===(e=a.endpoints)||void 0===e||null===(e=e.save_connector_settings)||void 0===e?void 0:e.nonce)||"",I=(0,C.dh)(),q=c.primary_locked,x=c.backup_locked,P=(null==f?void 0:f.integrations)||{},F=P.primary_disabled_heading,L=P.primary_disabled_content,B=P.integration_disabled,M=o.map(function(t){var n,e,i;if("button"===t.props.element&&"edit"===t.key)return j(j({},t),{},{props:j(j({},t.props),{},{customAttributes:j(j({},t.props.customAttributes||{}),{},{onClick:function(){v(g.id),h({screen:2,action:"edit"}),k({closeOnMaskClick:!1,isOpen:!0,onClose:function(){return k({isOpen:!1})}},l.q_.createElement(S.default,{common:a,data:c,i18n:f}))}})})});if("button"===t.props.element&&"remove"===t.key)return j(j({},t),{},{props:j(j({},t.props),{},{customAttributes:j(j({},t.props.customAttributes||{}),{},{"data-test-id":"integration-settings-dropdown-item-".concat(g.id,"-remove"),onClick:function(){if(g.data.is_primary){var t=function(){_(!1)};b({confirmDialogCustomAttributes:{showCancelButton:!1},confirmDialogI18n:{confirm_change_content:L,confirm_change_heading:F},confirmDialogOpen:!0,confirmDialogOnClose:t,confirmDialogOnConfirm:t})}var n={enabled:!1,is_primary:!1,is_backup:!1};N(g.id,E,w,n).then(function(){y(g.id,"enabled",!1),y(g.id,"is_primary",!1),y(g.id,"is_backup",!1),O(g.id,n),I((0,d.nv)(B,g.title))})}})})});if("set-as-primary"===t.key&&q||"set-as-backup"===t.key&&x)return j(j({},t),{},{props:j(j({},t.props),{},{customAttributes:j(j({},t.props.customAttributes||{}),{},{disabled:!0})})});if(null!=g&&null!==(n=g.data)&&void 0!==n&&n.configured){var o;if("link"===t.props.element&&"send-a-test"===t.key)return j(j({},t),{},{props:j(j({},t.props),{},{customAttributes:j(j({},t.props.customAttributes||{}),{},{href:"".concat((null===(o=t.props.customAttributes)||void 0===o?void 0:o.href)||"","&integration=").concat(g.id)})})});var r=function(){};switch(t.key){case"set-as-primary":r=function(){N(g.id,E,w,{enabled:!0,is_primary:!0,is_backup:!1}).then(function(){y(g.id,"is_primary",!0),y(g.id,"is_backup",!1),O(g.id,{enabled:!0,is_primary:!0,is_backup:!1}),I((0,d.nv)(f.integrations.set_primary_integration,g.title)),z(m,"is_primary",O,g.id,E,w)})};break;case"set-as-backup":r=function(){N(g.id,E,w,{enabled:!0,is_primary:!1,is_backup:!0}).then(function(){y(g.id,"is_primary",!1),y(g.id,"is_backup",!0),O(g.id,{enabled:!0,is_backup:!0,is_primary:!1}),I((0,d.nv)(f.integrations.set_backup_integration,g.title)),z(m,"is_backup",O,g.id,E,w)})}}return j(j({},t),{},{props:j(j({},t.props),{},{customAttributes:j(j({},t.props.customAttributes||{}),{},{"data-test-id":"integration-settings-dropdown-item-".concat(g.id,"-").concat(t.key),onClick:r})})})}return"send-a-test"===t.key?j(j({},t),{},{props:j(j({},(null==t?void 0:t.props)||{}),{},{element:"button",customAttributes:j(j({},(null==t||null===(i=t.props)||void 0===i?void 0:i.customAttributes)||{}),{},{disabled:!0})})}):j(j({},t),{},{props:j(j({},(null==t?void 0:t.props)||{}),{},{customAttributes:j(j({},(null==t||null===(e=t.props)||void 0===e?void 0:e.customAttributes)||{}),{},{disabled:!0})})})});return l.q_.createElement(A.A,{align:"right",closeOnClick:!0,listItems:M,triggerAttributes:{ariaId:"".concat(g.id,"-aria-labelledby"),ariaText:f.integrations.card_more_settings,customAttributes:{"data-test-id":"integration-settings-dropdown-trigger-".concat(g.id)},iconPrefix:"gravitysmtp-admin-icon",icon:"dots-horizontal",id:"".concat(g.id,"-trigger"),size:"size-height-s",type:"icon-grey"},width:192})}),z=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(a){var s;a.id!==e&&!0!==(null==a||null===(s=a.data)||void 0===s?void 0:s.disabled)&&!1!==(null==a?void 0:a.data[t])&&(N(a.id,i,o,(0,r.A)({},t,!1)),n(a.id,(0,r.A)({},t,!1)))})},N=function(t,n,e,i){var o=i.activated,r=i.configured,a=i.enabled,c=i.is_primary,u=i.is_backup,l=q.i18n,p=(void 0===l?{}:l).debug_messages,f=void 0===p?{}:p,m=f.saving_integration_settings,v=void 0===m?"":m,_=f.saving_integration_settings_error,b=void 0===_?"":_,y={action:n,security:e,connector_type:t,settings:j(j(j(j(j({},void 0!==o&&{activated:o}),void 0!==r&&{configured:r}),void 0!==a&&{enabled:a}),void 0!==c&&{is_primary:c}),void 0!==u&&{is_backup:u})};return(0,E.A)((0,d.nv)(v,t,JSON.stringify((0,w.A)(["security"],y))),"info"),(0,g.bE)({endpoint:s(),body:y}).then(function(t){return t}).catch(function(n){throw(0,E.A)((0,d.nv)(b,t,JSON.stringify(n)),"error"),console.error(n),n})},M=P(function(t){var n=t.common,e=t.data,i=t.i18n,o=t.integration,r=t.actionItems,a=t.caps,s=(0,D.default)(function(t){return t.setActiveIntegrationId}),c=(0,D.default)(function(t){return t.setIntegrationsFlyoutState}),u=(0,D.default)(function(t){return t.setSettingsFlyout}),d=e.primary_locked,g=e.backup_locked,v=L(function(){return l.q_.createElement(_.A,{customClasses:["gform-card__top-container-heading"],tagName:"h3",content:o.title,size:"text-md",weight:"medium"})},[o.title]),A=L(function(){var t={content:n.i18n.setting_locked,icon:"lock",iconPrefix:"gravitysmtp-admin-icon",iconPreset:"status-locked",maxWidth:300,position:"right",spacing:[0,0,0,2],tagName:"span",theme:"port"};return o.data.is_primary?l.q_.createElement(f.A,{customClasses:["gform-card__top-container-badge"],display:"flex"},l.q_.createElement(b.A,{content:i.integrations.card_primary.toUpperCase(),size:"text-xxs",spacing:[0,0,0,2],type:"blue"}),d&&l.q_.createElement(h.A,t)):o.data.is_backup?l.q_.createElement(f.A,{customClasses:["gform-card__top-container-badge"],display:"flex"},l.q_.createElement(b.A,{content:i.integrations.card_backup.toUpperCase(),size:"text-xxs",spacing:[0,0,0,2],type:"upgrade"}),g&&l.q_.createElement(h.A,t)):null},[n.i18n.setting_locked,o.data.is_primary,o.data.is_backup,i.integrations.card_primary,i.integrations.card_backup,d,g]),k=L(function(){return l.q_.createElement(y.A,{customClasses:["gform-card__top-container-description"],color:"comet",size:"text-sm"},o.description)},[o.description]),C=L(function(){return p["".concat(o.logo,"Logo")]||p.BrokenImage},[o.logo]),E=l.q_.createElement(C,null),w=F(function(){s(o.id),c({screen:2,action:"edit"}),u({closeOnMaskClick:!1,isOpen:!0,onClose:function(){return u({isOpen:!1})}},l.q_.createElement(S.default,{common:n,data:e,i18n:i}))},[s,o.id,c,u,n,e,i]),I=[E];I.push(A);var j=((null==i?void 0:i.integrations)||{}).card_settings,q=l.q_.createElement(m.A,{customClasses:["gform-card__top-container-settings-button"],icon:"cog",customAttributes:{"data-test-id":"integration-settings-button-".concat(o.id)},iconPrefix:"gravitysmtp-admin-icon",label:j,onClick:w,size:"size-height-s",type:"icon-white",disabled:!a.gravitysmtp_edit_integrations}),x=l.q_.createElement(f.A,{customClasses:["gform-card__top-container-buttons"],display:"flex"},q,l.q_.createElement(B,{actionItems:r,common:n,data:e,integration:o,i18n:i}));return I.push(x),l.q_.createElement(O.A,{customClasses:["gravitysmtp-settings-app__integration-card"],title:v,description:k,headerContent:I,disabled:o.data.disabled})}),T=x(function(t,n){var e=t.customAttributes,i=void 0===e?{}:e,r=t.customClasses,a=void 0===r?[]:r,s=t.common,c=void 0===s?{}:s,u=t.data,g=void 0===u?{}:u,p=t.i18n,m=void 0===p?{}:p,b=(0,D.default)(function(t){return t.integrations}),A=(0,D.default)(function(t){return t.setIntegrationsFlyoutState}),h=(0,D.default)(function(t){return t.setSettingsFlyout}),O=j({className:(0,l.pS)({"gravitysmtp-settings-app__integrations":!0},a),"data-test-id":"settings-integrations-screen"},i),C=(null==m?void 0:m.integrations)||{},E=C.top_heading,w=C.top_content,I=(null==g?void 0:g.integrations_actions)||[],q=(null==g?void 0:g.caps)||{};return l.q_.createElement("div",(0,o.A)({},O,{ref:n}),l.q_.createElement(_.A,{size:"display-sm",weight:"semibold",spacing:1,content:E}),l.q_.createElement(y.A,{content:w,size:"text-sm",color:"comet",spacing:6}),!!b.length&&q.gravitysmtp_view_integrations&&l.q_.createElement(f.A,{spacing:6},l.q_.createElement(v.A,{container:!0,wrap:!0,customClasses:["gravitysmtp-settings-app__integration-card-grid"],alignItems:"stretch",justifyContent:"flex-start",columnSpacing:5,rowSpacing:6},l.q_.createElement(v.A,{item:!0,customClasses:["gravitysmtp-settings-app__integration-card-grid-item","gravitysmtp-settings-app__integration-card-grid-item--add-item"],customAttributes:{"data-test-id":"integration-card-add-item"}},l.q_.createElement(k.A,{buttonAttributes:{customAttributes:{"data-test-id":"integration-card-add-item-button"}},buttonClasses:["gform-card-add__button"],onClick:function(){A({screen:1,action:"add"}),h({closeOnMaskClick:!1,isOpen:!0,onClose:function(){return h({isOpen:!1})}},l.q_.createElement(S.default,{common:c,data:g,i18n:m}))}})),b.map(function(t){var n,e;return null!=t&&null!==(n=t.data)&&void 0!==n&&n.disabled||null==t||null===(e=t.data)||void 0===e||!e.enabled?null:l.q_.createElement(v.A,{item:!0,key:"integrations-".concat((0,d.Yv)(t.title)),customClasses:["gravitysmtp-settings-app__integration-card-grid-item","gravitysmtp-settings-app__integration-card-grid-item--".concat((0,d.Yv)(t.title))],customAttributes:{"data-test-id":"integration-card-".concat(t.id)}},l.q_.createElement(M,{common:c,data:g,i18n:m,integration:t,actionItems:I,caps:q}))}))))});T.propTypes={customAttributes:l.By.object,customClasses:l.By.oneOfType([l.By.string,l.By.array,l.By.object]),common:l.By.object,data:l.By.object,i18n:l.By.object},T.displayName="IntegrationsScreen",n.default=T},52636:function(t,n,e){var i=e(32352),o=e(59092),r=e(25696),a=e(19006);n.default=function(t){var n=(0,o.default)(function(t){return t.integrationsFlyoutState}),e={className:"gravitysmtp-settings-app__integrations-flyout"};return i.q_.createElement("div",e,function(){switch(null==n?void 0:n.screen){case 1:default:return i.q_.createElement(r.default,t);case 2:return i.q_.createElement(a.default,t)}}())}},53015:function(t,n,e){var i,o=e(40450),r=e.n(o),a=(null===(i=(0,e(21713).zj)(r(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};n.A=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null==a||null===(t=a.data)||void 0===t||null===(t=t.locked_settings)||void 0===t?void 0:t.includes(n))||e}},55809:function(t,n,e){e.r(n),e.d(n,{AmazonAWSLogo:function(){return i.A},BrevoLogo:function(){return o.A},BrokenImage:function(){return r.A},CustomSMTPLogo:function(){return a.A},ElasticEmailLogo:function(){return s.A},EmailitLogo:function(){return c.A},GoogleAltLogo:function(){return u.A},GoogleLogo:function(){return l.A},MailchimpLogo:function(){return d.A},MailerSendLogo:function(){return g.A},MailgunLogo:function(){return p.A},MailjetLogo:function(){return f.A},MandrillLogo:function(){return m.A},MicrosoftAltLogo:function(){return v.A},MicrosoftLogo:function(){return _.A},PHPLogo:function(){return b.A},PostmarkLogo:function(){return y.A},ResendLogo:function(){return A.A},SMTP2GOLogo:function(){return O.A},SendGridLogo:function(){return h.A},SlackLogo:function(){return k.A},SparkPostLogo:function(){return C.A},TelegramLogo:function(){return S.A},TwilioLogo:function(){return E.A},WhatsAppLogo:function(){return w.A},WordPressLogo:function(){return D.A},ZohoAltLogo:function(){return j},ZohoLogo:function(){return I.A}});var i=e(80403),o=e(53214),r=e(79543),a=e(26220),s=e(74685),c=e(89667),u=e(63660),l=e(80419),d=e(8524),g=e(6682),p=e(73437),f=e(87504),m=e(49501),v=e(40783),_=e(55582),b=e(814),y=e(10503),A=e(52071),h=e(83654),k=e(15034),O=e(68694),C=e(14945),S=e(23203),E=e(6560),w=e(73650),D=e(84173),I=e(64158),j=I.A},59092:function(t,n,e){var i,o,r,a,s,c,u,l=e(88856),d=e(40450),g=e.n(d),p=e(32352),f=e(91820),m=e(21713);function v(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,i)}return e}function _(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?v(Object(e),!0).forEach(function(n){(0,l.A)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var b,y,A,h,k=(null===(i=(0,m.zj)(g(),"gravitysmtp_admin_config"))||void 0===i||null===(i=i.components)||void 0===i?void 0:i.settings)||{},O=(null===(o=(0,m.zj)(g(),"gravitysmtp_admin_config"))||void 0===o?void 0:o.common)||{},C={activeIntegrationId:(h=null==k||null===(A=k.data)||void 0===A||null===(A=A.integrations)||void 0===A?void 0:A.find(function(t){var n;return null==t||null===(n=t.data)||void 0===n?void 0:n.enabled}),(null==h?void 0:h.id)||""),confirmDialogI18n:{},confirmDialogOnCancel:function(){},confirmDialogOnClose:function(){},confirmDialogOnConfirm:function(){},confirmDialogOpen:!1,confirmDialogConfirmButtonType:"primary-new",debugLogEnabled:(null==O||null===(r=O.data)||void 0===r?void 0:r.debug_log_enabled)||!1,notificationsEmailDigestEnabled:(null==k||null===(a=k.data)||void 0===a?void 0:a.notifications_settings.email_digest_enabled)||!1,experimentalFeatures:(null==O||null===(s=O.data)||void 0===s?void 0:s.experimental_features)||{},integrations:(null==k||null===(c=k.data)||void 0===c?void 0:c.integrations)||[],integrationsFlyoutState:{screen:1},integrationSettingsFormData:(y={},null==k||null===(b=k.data)||void 0===b||null===(b=b.integrations)||void 0===b||b.forEach(function(t){y[t.id]=(null==t?void 0:t.data)||{}}),y),noticeDialogOpen:!1,pageLoaderActive:!1,settingsFlyoutChildren:null,settingsFlyoutProps:{},settingsNavBlocked:!1,testModeEnabled:(null==O||null===(u=O.data)||void 0===u?void 0:u.test_mode_enabled)||!1},S=(0,f.vt)(C,function(t){return{setActiveIntegrationId:function(n){return t(function(){return{activeIntegrationId:n}})},setConfirmDialogOpen:function(n){return t(function(){return{confirmDialogOpen:n}})},setConfirmDialogSettings:function(n){var e=n.confirmDialogCustomAttributes,i=void 0===e?{}:e,o=n.confirmDialogI18n,r=void 0===o?{}:o,a=n.confirmDialogOpen,s=void 0!==a&&a,c=n.confirmDialogOnCancel,u=void 0===c?function(){}:c,l=n.confirmDialogOnClose,d=void 0===l?function(){}:l,g=n.confirmDialogOnConfirm,p=void 0===g?function(){}:g,f=n.confirmDialogConfirmButtonType,m=void 0===f?"primary-new":f;t(function(){return{confirmDialogCustomAttributes:i,confirmDialogConfirmButtonType:m,confirmDialogI18n:r,confirmDialogOpen:s,confirmDialogOnCancel:u,confirmDialogOnClose:d,confirmDialogOnConfirm:p}})},setExperimentalFeatures:function(n,e){return t(function(t){return{experimentalFeatures:_(_({},t.experimentalFeatures),{},(0,l.A)({},n,e))}})},setIntegrationsFlyoutState:function(n){return t(function(){return{integrationsFlyoutState:n}})},setNoticeDialogOpen:function(n){return t(function(){return{noticeDialogOpen:n}})},setNotificationsEmailDigestEnabled:function(n){return t(function(){return{notificationsEmailDigestEnabled:n}})},setPageLoaderActive:function(n){return t(function(){return{pageLoaderActive:n}})},setIntegrationSettingsFormData:function(n,e,i){return t((0,p.DB)(function(t){t.integrationSettingsFormData[n]||(t.integrationSettingsFormData[n]={}),t.integrationSettingsFormData[n][e]=i}))},setDebugLogEnabled:function(n){return t(function(){return{debugLogEnabled:n}})},setSettingsFlyout:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return t(function(t){return{settingsFlyoutProps:n,settingsFlyoutChildren:void 0===e?t.settingsFlyoutChildren:e}})},setSettingsFlyoutClosed:function(){return t(function(t){return{settingsFlyoutProps:_(_({},t.settingsFlyoutProps),{},{isOpen:!1})}})},setSettingsNavBlocked:function(n){return t(function(){return{settingsNavBlocked:n}})},setTestModeEnabled:function(n){return t(function(){return{testModeEnabled:n}})},updateIntegrationsFlyoutState:function(n){return t(function(t){return{integrationsFlyoutState:_(_({},t.integrationsFlyoutState),n)}})},updateIntegrationStatus:function(n,e){var i=e.activated,o=e.configured,r=e.enabled,a=e.is_primary,s=e.is_backup;return t((0,p.DB)(function(t){var e=t.integrations.find(function(t){return t.id===n});e&&(e.data||(e.data={}),void 0!==i&&(e.data.activated=i),void 0!==o&&(e.data.configured=o),void 0!==r&&(e.data.enabled=r),void 0!==a&&(e.data.is_primary=a),void 0!==s&&(e.data.is_backup=s))}))},updateSettingsFlyoutProps:function(n){return t(function(t){return{settingsFlyoutProps:_(_({},t.settingsFlyoutProps),n)}})}}});n.default=S},83707:function(t,n,e){e.d(n,{A:function(){return p}});var i,o=e(90455),r=e(78564),a=e.n(r),s=e(27122),c=e.n(s),u=e(40450),l=e.n(u),d=e(40388),g=(null===(i=(0,e(21713).zj)(l(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};function p(){return f.apply(this,arguments)}function f(){return f=(0,o.A)(a().mark(function t(){var n,e,i,o,r,s,u,l,p,f,m=arguments;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>0&&void 0!==m[0]?m[0]:"",o=m.length>1&&void 0!==m[1]?m[1]:"debug",r=g.data,s=void 0===r?{}:r,u=g.endpoints,p=(null==(l=void 0===u?{}:u)||null===(n=l.log_debug_item)||void 0===n?void 0:n.action)||"",f=(null==l||null===(e=l.log_debug_item)||void 0===e?void 0:e.nonce)||"",null!=s&&s.debug_log_enabled&&p&&f&&i){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,(0,d.bE)({endpoint:c(),body:{action:p,security:f,message:i,priority:o}}).catch(function(t){console.error(t)});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}},t)})),f.apply(this,arguments)}},93313:function(t,n,e){var i=e(52888),o=e(8140);n.A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",e=function(r){return Object.entries(r).reduce(function(r,a){var s=(0,o.A)(a,2),c=s[0],u=s[1];return"object"===(0,i.A)(u)&&null!==u?r[c]=e(u):t.includes(c)?r[c]=null===u?null:n.repeat(u.length):r[c]=u,r},Array.isArray(r)?[]:{})};return e(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);