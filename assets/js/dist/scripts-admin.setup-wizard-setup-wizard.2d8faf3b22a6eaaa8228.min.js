"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[1694],{528:function(e,t,n){var r=n(90455),a=n(88856),i=n(8140),s=n(78564),c=n.n(s),u=n(27122),o=n.n(u),l=n(32352),d=n(91820),p=n(40388),_=n(21713),v=n(30242),f=n(80509),g=n(5529),m=n(66598),y=n(83707),b=n(93313),w=n(18698),A=n(57290),k=l.q_.useEffect,h=l.q_.useRef,x=l.q_.useState;t.default=function(e){var t=e.common,n=e.data,s=e.i18n,u=s.setup_wizard_back_button,z=s.setup_wizard_dashboard_button,E=s.setup_wizard_setup_skipped_title,S=s.setup_wizard_setup_skipped_copy,q=s.setup_wizard_setup_success_title,C=s.setup_wizard_setup_success_copy,N=s.setup_wizard_setup_failed_title,O=s.setup_wizard_setup_failed_copy,B=s.setup_wizard_activate_integration_button,P=n.integrations,J=t.endpoints,M=(void 0===J?{}:J).save_connector_settings,j=void 0===M?{}:M,D=j.action,I=void 0===D?"":D,T=j.nonce,L=void 0===T?"":T,F=t.i18n,R=(void 0===F?{}:F).debug_messages,V=void 0===R?{}:R,H=V.saving_integration_settings,U=void 0===H?"":H,W=V.saving_integration_settings_error,G=void 0===W?"":W,K=(0,A.default)(function(e){return e.activeStep}),X=(0,A.default)(function(e){return e.isAnimatedIn}),Q=(0,A.default)(function(e){return e.integrationSetupAction}),Y=(0,A.default)(function(e){return e.setupStatus}),Z=(0,A.default)(function(e){return e.integration}),$=(0,A.default)(function(e){return e.closeDialog}),ee=(0,A.default)(function(e){return e.setActiveStep}),te=(0,A.default)(function(e){return e.setActiveNavBarStep}),ne=(0,A.default)(function(e){return e.setSettingsUpdated}),re=(0,A.default)(function(e){return e.setHasDebugError}),ae=x(!1),ie=(0,i.A)(ae,2),se=ie[0],ce=ie[1],ue="failed"===Y?w.MailFailedBg:w.MailSuccessBg,oe="",le="",de="primary-new";switch(Y){case"skipped":oe=E,le=S;break;case"success":oe=q,le=C,de="white";break;case"failed":oe=N,le=O}var pe=h();k(function(){5===K&&pe.current&&pe.current.focus()},[K]);var _e={ref:(0,d.rM)(5===K&&X),className:(0,l.pS)((0,a.A)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(5),!0)),"aria-hidden":5!==K,"data-test-id":"setup-wizard-screen-05"},ve=P.reduce(function(e,t){return e||t.id!==Z?e:t.title},""),fe=(0,_.nv)(B,ve),ge=P.filter(function(e){return!(e.data&&e.data.disabled)}).map(function(e){return e.id}),me=function(){var e=(0,r.A)(c().mark(function e(t){var n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:I,security:L,connector_type:t,no_validate:!0,settings:{is_primary:!1}},e.next=3,(0,y.A)((0,_.nv)(U,t,JSON.stringify((0,b.A)(["security"],n))),"info");case 3:e.prev=3,(0,p.bE)({endpoint:o(),body:n}),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(3),console.error(e.t0),e.next=12,(0,y.A)((0,_.nv)(G,t,JSON.stringify(e.t0)),"error");case 12:case"end":return e.stop()}},e,null,[[3,7]])}));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=(0,r.A)(c().mark(function e(){var t,n,r,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=ge.filter(function(e){return e!==Z}).map(me),e.next=3,Promise.all(t);case 3:return n={action:I,security:L,connector_type:Z,settings:{configured:!0,enabled:!0,is_primary:!0}},e.next=6,(0,y.A)((0,_.nv)(U,Z,JSON.stringify((0,b.A)(["security"],n))),"info");case 6:return e.prev=6,e.next=9,(0,p.bE)({endpoint:o(),body:n});case 9:if(null!=(a=e.sent)&&null!==(r=a.data)&&void 0!==r&&r.success){e.next=17;break}return console.error(null==a?void 0:a.error),e.next=14,(0,y.A)((0,_.nv)(G,Z,JSON.stringify(null==a?void 0:a.error)),"error");case 14:re(!0),e.next=18;break;case 17:ne();case 18:e.next=26;break;case 20:return e.prev=20,e.t0=e.catch(6),console.error(e.t0),e.next=25,(0,y.A)((0,_.nv)(G,Z,JSON.stringify(e.t0)),"error");case 25:re(!0);case 26:case"end":return e.stop()}},e,null,[[6,20]])}));return function(){return e.apply(this,arguments)}}();return l.q_.createElement("div",_e,l.q_.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},l.q_.createElement(l.mM,{scrollableNodeProps:{ref:pe}},l.q_.createElement("div",{className:"gravitysmtp-setup-wizard__content"},l.q_.createElement(v.A,{customClasses:["gravitysmtp-setup-wizard__screen-nav-buttons"],display:"flex",spacing:10},l.q_.createElement(f.A,{customAttributes:{"data-test-id":"setup-wizard-screen-05-back-button"},customClasses:["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--back"],icon:"arrow-narrow-left",iconPrefix:"gravitysmtp-admin-icon",label:u,size:"size-height-xl",type:"icon-white",onClick:function(){var e="skip"===Q?3:4;ee(e),te(e)}}),l.q_.createElement(f.A,{customAttributes:{"data-test-id":"setup-wizard-screen-05-skip-button"},customClasses:["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--skip"],icon:"arrow-narrow-right",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"trailing",label:z,size:"size-height-xl",type:de,onClick:function(){return $()}}),"success"===Y&&l.q_.createElement(f.A,{customAttributes:{"data-test-id":"setup-wizard-screen-05-next-button"},active:se,activeType:"loader",customClasses:["gravitysmtp-setup-wizard__screen-nav-button","gravitysmtp-setup-wizard__screen-nav-button--next"],label:fe,lockSize:!0,size:"size-height-xl",type:"primary-new",onClick:(0,r.A)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ce(!0),e.next=3,ye();case 3:(0,_.Ak)({event:"gravitysmtp/page_loader/active",native:!1,data:!0}),$();case 5:case"end":return e.stop()}},e)}))})),l.q_.createElement(v.A,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:4},l.q_.createElement(g.A,{content:oe,spacing:4,size:"display-sm",tagName:"h2",weight:"medium"}),l.q_.createElement(m.A,{content:le})),l.q_.createElement(v.A,{customClasses:["gravitysmtp-setup-wizard__content-body"]},l.q_.createElement(ue,null))))))}},19708:function(e,t,n){var r=n(90455),a=n(88856),i=n(8140),s=n(78564),c=n.n(s),u=n(27122),o=n.n(u),l=n(32352),d=n(91820),p=n(40388),_=n(30242),v=n(80509),f=n(5529),g=n(25787),m=n(66598),y=n(84860),b=n(18698),w=n(57290),A=n(21713),k=n(87029),h=n(16265),x=n(83707),z=n(93313),E=n(27764);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=l.q_.useEffect,N=l.q_.useRef,O=l.q_.useState;t.default=function(e){var t,n,s,u,S=e.common,B=e.data,P=e.endpoints,J=e.i18n,M=(0,w.default)(function(e){return e.activeStep}),j=(0,w.default)(function(e){return e.isAnimatedIn}),D=(0,w.default)(function(e){return e.isOpen}),I=(0,w.default)(function(e){return e.setActiveStep}),T=(0,w.default)(function(e){return e.setActiveNavBarStepNext}),L=(0,w.default)(function(e){return e.setShouldRedirect}),F=(0,w.default)(function(e){return e.setHasDebugError}),R=J.debug_messages,V=void 0===R?{}:R,H=V.checking_license_key,U=V.checking_license_key_error,W=V.saving_should_display_error,G=V.saving_license_key_error,K=V.updating_usage_analytics_error,X=V.saving_license_key,Q=V.setting_should_display_false,Y=V.starting_subsequent_run,Z=V.updating_usage_analytics,$=J.setup_wizard_welcome_title,ee=J.setup_wizard_welcome_copy,te=(J.setup_wizard_welcome_list_01,J.setup_wizard_welcome_list_02,J.setup_wizard_welcome_list_03,J.setup_wizard_welcome_list_04,J.setup_wizard_get_started),ne=J.setup_wizard_verify_license,re=J.setup_wizard_checking_license,ae=J.setup_wizard_license_input_label,ie=J.setup_wizard_license_input_placeholder,se=B.license_key_is_valid,ce=B.should_display,ue=(null==S?void 0:S.i18n)||{},oe=ue.general_settings_usage_analytics_label,le=ue.general_settings_usage_analytics_help_text,de=(null==S?void 0:S.data)||{},pe=de.param_keys,_e=de.usage_analytics_enabled,ve=de.usage_analytics_link,fe=(0,y.dh)(),ge=ce&&se&&(null==B?void 0:B.license_key)||"",me=O(!1),ye=(0,i.A)(me,2),be=ye[0],we=ye[1],Ae=O(ge),ke=(0,i.A)(Ae,2),he=ke[0],xe=ke[1],ze=O(!1),Ee=(0,i.A)(ze,2),Se=Ee[0],qe=Ee[1],Ce=(0,d.uH)(_e),Ne=(0,i.A)(Ce,2),Oe=Ne[0],Be=Ne[1],Pe=(null==P||null===(t=P.save_plugin_settings)||void 0===t?void 0:t.action)||"",Je=(null==P||null===(n=P.save_plugin_settings)||void 0===n?void 0:n.nonce)||"",Me=(null==P||null===(s=P.check_license)||void 0===s?void 0:s.action)||"",je=(null==P||null===(u=P.check_license)||void 0===u?void 0:u.nonce)||"",De=N();C(function(){1===M&&De.current&&De.current.focus()},[M]),C(function(){var e=function(e){var t;(null===(t=e.detail)||void 0===t?void 0:t.key)===pe.usage_analytics&&Be(e.detail.value)};return document.addEventListener("gravitysmtp/setting-updated",e),function(){document.removeEventListener("gravitysmtp/setting-updated",e)}}),C(function(){D&&1===M&&!ce&&(0,x.A)((0,A.nv)(Y,JSON.stringify({licenseKeyIsValid:se,nextStep:2,activeStep:M,currentStep:1})),"info")},[D]);var Ie={ref:(0,d.rM)(1===M&&j),className:(0,l.pS)((0,a.A)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(1),!0)),"aria-hidden":1!==M,"data-test-id":"setup-wizard-screen-01"},Te=function(){var e=(0,r.A)(c().mark(function e(){var t,n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ce){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n={action:Pe,security:Je,key:"setup_wizard_should_display",value:!1},e.next=6,(0,x.A)((0,A.nv)(Q,JSON.stringify((0,z.A)(["security"],n))),"info");case 6:return e.next=8,(0,p.bE)({endpoint:o(),body:n});case 8:if(null!=(r=e.sent)&&null!==(t=r.data)&&void 0!==t&&t.success){e.next=14;break}return console.error(null==r?void 0:r.error),e.next=13,(0,x.A)((0,A.nv)(W,JSON.stringify(null==r?void 0:r.error)),"error");case 13:F(!0);case 14:e.next=22;break;case 16:return e.prev=16,e.t0=e.catch(2),console.error(e.t0),e.next=21,(0,x.A)((0,A.nv)(W,JSON.stringify(e.t0)),"error");case 21:F(!0);case 22:case"end":return e.stop()}},e,null,[[2,16]])}));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=(0,r.A)(c().mark(function e(){var t,n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={action:Pe,security:Je,key:"license_key",value:he.trim()},e.next=4,(0,x.A)((0,A.nv)(X,JSON.stringify((0,z.A)(["security","license_key"],n))),"info");case 4:return e.next=6,(0,p.bE)({endpoint:o(),body:n});case 6:if(null!=(r=e.sent)&&null!==(t=r.data)&&void 0!==t&&t.success){e.next=12;break}return console.error(null==r?void 0:r.error),e.next=11,(0,x.A)((0,A.nv)(G,JSON.stringify(null==r?void 0:r.error)),"error");case 11:F(!0);case 12:e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(0),console.error(e.t0),e.next=19,(0,x.A)((0,A.nv)(G,JSON.stringify(e.t0)),"error");case 19:F(!0);case 20:case"end":return e.stop()}},e,null,[[0,14]])}));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=(0,r.A)(c().mark(function e(t){var n,r,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={action:Pe,security:Je,key:pe.usage_analytics,value:t?"true":"false"},e.next=4,(0,x.A)((0,A.nv)(Z,JSON.stringify((0,z.A)(["security"],r))),"info");case 4:return e.next=6,(0,p.bE)({endpoint:o(),body:r});case 6:if(null!=(a=e.sent)&&null!==(n=a.data)&&void 0!==n&&n.success){e.next=14;break}return console.error(null==a?void 0:a.error),e.next=11,(0,x.A)((0,A.nv)(K,JSON.stringify(null==a?void 0:a.error)),"error");case 11:F(!0),e.next=16;break;case 14:S.data.usage_analytics_enabled=t,Be(t);case 16:e.next=24;break;case 18:return e.prev=18,e.t0=e.catch(0),console.error(e.t0),e.next=23,(0,x.A)((0,A.nv)(K,JSON.stringify(e.t0)),"error");case 23:F(!0);case 24:case"end":return e.stop()}},e,null,[[0,18]])}));return function(t){return e.apply(this,arguments)}}(),Re={initialChecked:_e,externalChecked:Oe,externalControl:!0,labelAttributes:q({label:oe},(0,E.A)(pe.usage_analytics)),helpTextAttributes:{content:l.q_.createElement(d.Xx,{closingSymbol:"}}",openingSymbol:"{{",text:le,tokens:[{component:k.A,key:"learn_link",props:{href:ve,size:"text-xs",target:"_blank"}}]})},helpTextWidth:"full",labelPosition:"left",id:"usage_analytics_wizard",name:pe.usage_analytics,onChange:Fe,size:"size-m",width:"full"},Ve=function(){var e=(0,r.A)(c().mark(function e(){var t,n,r,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={action:Me,security:je,license_key:he.trim()},e.next=4,(0,x.A)((0,A.nv)(H,JSON.stringify((0,z.A)(["security","license_key"],n))),"info");case 4:return e.next=6,(0,p.bE)({endpoint:o(),body:n});case 6:if(r=e.sent,we(!1),null!=r&&null!==(t=r.data)&&void 0!==t&&t.success){e.next=16;break}return a=(0,A.Fh)(r.error.detail.data)?JSON.parse(r.error.detail.data):"",e.next=12,(0,x.A)((0,A.nv)(U,JSON.stringify(null==r?void 0:r.error)),"error");case 12:F(!0),fe(a.data,"error"),e.next=20;break;case 16:qe(!0),Te().then(function(){Le()}),L(!1),setTimeout(function(){I(2),T(),setTimeout(function(){qe(!1)},300)},1e3);case 20:e.next=28;break;case 22:return e.prev=22,e.t0=e.catch(0),console.error(e.t0),e.next=27,(0,x.A)((0,A.nv)(U,JSON.stringify(e.t0)),"error");case 27:F(!0);case 28:case"end":return e.stop()}},e,null,[[0,22]])}));return function(){return e.apply(this,arguments)}}();return l.q_.createElement("div",Ie,l.q_.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},l.q_.createElement(l.mM,{scrollableNodeProps:{ref:De}},l.q_.createElement("div",{className:"gravitysmtp-setup-wizard__content"},l.q_.createElement(_.A,{customClasses:["gravitysmtp-setup-wizard__inner-content"],x:368},l.q_.createElement(d._A,{delay:200,transitionDuration:800},l.q_.createElement(_.A,{customClasses:["gravitysmtp-setup-wizard__logo-container"],spacing:12},l.q_.createElement(b.GravitySMTPFullLogo,null)),l.q_.createElement(_.A,{customClasses:["gravitysmtp-setup-wizard__heading-container"]},l.q_.createElement(f.A,{content:$,size:"display-lg",spacing:6,tagName:"h2",weight:"semibold"})),l.q_.createElement(_.A,{customClasses:["gravitysmtp-setup-wizard__body-container"]},l.q_.createElement(m.A,{content:ee,spacing:8})),l.q_.createElement(_.A,{customClasses:["gravitysmtp-setup-wizard__footer-container"],spacing:8},se?l.q_.createElement(v.A,{customClasses:["gravitysmtp-setup-wizard__get-started-button"],customAttributes:{"data-test-id":"setup-wizard-screen-01-license-verified-button"},size:"size-height-xl",icon:"check-circle",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",label:te,type:"primary-new",width:"full",onClick:function(){ce&&Te().then(function(){Le()}),L(!1),I(2),T()}}):l.q_.createElement(l.q_.Fragment,null,l.q_.createElement(g.A,{customAttributes:{disabled:be,"data-test-id":"setup-wizard-screen-01-license-input"},customClasses:["gravitysmtp-setup-wizard__license-input"],id:"gravitysmtp-setup-wizard__license-input",labelAttributes:{label:ae},onChange:xe,placeholder:ie,size:"size-xl",spacing:5,textSecurity:"disc",value:he}),l.q_.createElement(v.A,{customClasses:["gravitysmtp-setup-wizard__get-started-button"],customAttributes:{"data-test-id":"setup-wizard-screen-01-verify-license-button"},size:"size-height-xl",icon:"check-circle",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",label:ne,active:be,activeType:"loader",disabled:be||Se,activeText:re,type:Se?"apple-green":"primary-new",width:"full",onClick:(0,r.A)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return we(!0),e.next=3,Ve();case 3:case"end":return e.stop()}},e)}))}))),l.q_.createElement(_.A,null,l.q_.createElement(h.A,Re))))))))}},40516:function(e,t,n){var r=n(90455),a=n(8140),i=n(78564),s=n.n(i),c=n(27122),u=n.n(c),o=n(32352),l=n(40388),d=n(21713),p=n(84860),_=n(80509),v=n(48959),f=n(66893),g=n(30242),m=n(88358),y=n(19708),b=n(49445),w=n(47526),A=n(24679),k=n(528),h=n(57290),x=n(53015),z=n(83707),E=o.q_.useState,S=o.q_.useEffect,q=o.q_.useRef;t.default=function(e){var t,n,i,c,C,N,O=E(!0),B=(0,a.A)(O,2),P=B[0],J=B[1],M=(0,h.default)(function(e){return e.innerDialogOpen}),j=(0,h.default)(function(e){return e.activeStep}),D=(0,h.default)(function(e){return e.activeNavBarStep}),I=(0,h.default)(function(e){return e.isOpen}),T=(0,h.default)(function(e){return e.settingsUpdated}),L=(0,h.default)(function(e){return e.shouldRedirect}),F=(0,h.default)(function(e){return e.hasDebugError}),R=(0,h.default)(function(e){return e.closeDialog}),V=(0,h.default)(function(e){return e.openDialog}),H=(0,h.default)(function(e){return e.setIsAnimatedIn}),U=(0,d.K_)(),W="gravitysmtp-settings"===(null==U?void 0:U.page)&&"integrations"===(null==U?void 0:U.tab),G=q(),K=e.data,X=K.admin_url,Q=K.integrations_url,Y=K.license_key_is_valid,Z=K.should_display,$=e.i18n.debug_messages,ee=(void 0===$?{}:$).starting_first_run,te=e.common,ne=te.data,re=void 0===ne?{}:ne,ae=te.endpoints,ie=void 0===ae?{}:ae,se=(null==ie||null===(t=ie.save_plugin_settings)||void 0===t?void 0:t.action)||"",ce=(null==ie||null===(n=ie.save_plugin_settings)||void 0===n?void 0:n.nonce)||"",ue=(null==ie||null===(i=ie.delete_debug_logs)||void 0===i?void 0:i.action)||"",oe=(null==ie||null===(c=ie.delete_debug_logs)||void 0===c?void 0:c.nonce)||"",le={closeOnMaskClick:!1,closeButtonTitle:e.i18n.setup_wizard_close_button,customCloseButtonClasses:["gravitysmtp-setup-wizard--exit-button"],customCloseButtonLabelAttributes:{className:(0,o.pS)({"gform-button__icon":!0,"gravitysmtp-admin-icon":!0,"gravitysmtp-admin-icon--x":!0})},customWrapperClasses:["gravitysmtp-setup-wizard","gravitysmtp-setup-wizard--step-".concat(j),"gravitysmtp-setup-wizard--inner-dialog-".concat(M)],customMaskClasses:["gravitysmtp-setup-wizard-dialog",!P&&"gravitysmtp-setup-wizard--not-fullscreen"],id:"gravitysmtp-setup-wizard",isOpen:I,lockBody:!0,onOpen:(N=(0,r.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Z){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!(0,x.A)("debug_log_enabled")){e.next=5;break}return e.abrupt("return");case 5:return re.debug_log_enabled=!0,e.next=8,(0,l.bE)({endpoint:u(),body:{action:se,security:ce,key:"debug_log_enabled",value:!0}});case 8:(0,z.A)((0,d.nv)(ee,JSON.stringify({activeStep:j,licenseKeyIsValid:Y})),"info"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}},e,null,[[2,11]])})),function(){return N.apply(this,arguments)}),onOpenAfterAnimation:function(){H(!0)},onClose:(C=(0,r.A)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new URL(window.location.href)).searchParams.delete("setup-wizard-page"),history.pushState({},"",t.toString()),F||!Z){e.next=18;break}if(e.prev=5,!(0,x.A)("debug_log_enabled")){e.next=8;break}return e.abrupt("return");case 8:return re.debug_log_enabled=!1,e.next=11,(0,l.bE)({endpoint:u(),body:{action:se,security:ce,key:"debug_log_enabled",value:!1}});case 11:return e.next=13,(0,l.bE)({endpoint:u(),body:{action:ue,security:oe,all_logs:"1"}});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.error(e.t0);case 18:if(!(G.current&&W&&T)){e.next=21;break}return window.location.reload(),e.abrupt("return");case 21:L||(document.body.classList.remove("gravitysmtp-apps--hidden"),!W&&G.current&&(window.location.href=Q));case 22:case"end":return e.stop()}},e,null,[[5,15]])})),function(){return C.apply(this,arguments)}),onCloseAfterAnimation:function(){G.current&&W&&T||(L||W)&&(R(),H(!1),L&&(window.location.href=X))},padContent:!1,position:P?"fixed":"absolute",mode:"container",zIndex:100001};return S(function(){var e=function(){V()};return document.addEventListener("gravitysmtp/setup_wizard/open",e),function(){document.removeEventListener("gravitysmtp/setup_wizard/open",e)}},[]),S(function(){I&&document.body.classList.add("gravitysmtp-setup-wizard--open")},[I]),S(function(){G.current||(G.current=!0)},[]),o.q_.createElement(p.n,{defaultSettings:{errorIconAttributes:{icon:"exclamation-simple",iconPrefix:"gravitysmtp-admin-icon"},successIconAttributes:{icon:"correct",iconPrefix:"gravitysmtp-admin-icon"}}},o.q_.createElement(v.A,le,o.q_.createElement(f.A,{customClasses:["gravitysmtp-setup-wizard__nav-bar"]},o.q_.createElement(m.A,{activeStep:D,customClasses:["gravitysmtp-setup-wizard__steps"],icon:"check",iconPrefix:"gravitysmtp-admin-icon",numSteps:5,spacing:[8,0,0]})),o.q_.createElement(g.A,{x:1030,customClasses:["gravitysmtp-setup-wizard__content-mask"],setDisplay:!1}),!M&&o.q_.createElement(_.A,{ariaLabel:"Toggle Fullscreen",circular:!0,customClasses:["gravitysmtp-setup-wizard__fullscreen-toggle"],icon:P?"contract":"expand",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){J(!P)},type:"white"}),o.q_.createElement(y.default,e),o.q_.createElement(b.default,e),o.q_.createElement(w.default,e),o.q_.createElement(A.default,e),o.q_.createElement(k.default,e)))}},47526:function(e,t,n){var r=n(88856),a=n(8140),i=n(32352),s=n(91820),c=n(30242),u=n(5529),o=n(66598),l=n(83852),d=n(65224),p=n(18698),_=n(57290),v=i.q_.useEffect,f=i.q_.useRef;t.default=function(e){var t=e.data,n=e.i18n,g=n.setup_wizard_integration_title,m=n.setup_wizard_integration_copy_1,y=(n.setup_wizard_integration_copy_2,t.integrations),b=(0,_.default)(function(e){return e.activeStep}),w=(0,_.default)(function(e){return e.isAnimatedIn}),A=(0,_.default)(function(e){return e.integration}),k=(0,_.default)(function(e){return e.integrationSettingsFormData}),h=(0,_.default)(function(e){return e.setIntegration}),x=(0,_.default)(function(e){return e.setActiveStep}),z=(0,_.default)(function(e){return e.setActiveNavBarStep}),E=(0,_.default)(function(e){return e.setActiveNavBarStepNext}),S=(0,_.default)(function(e){return e.setActiveNavBarStepPrevious}),q=(0,_.default)(function(e){return e.setIntegrationSetupAction}),C=(0,_.default)(function(e){return e.setSetupStatus}),N=y.filter(function(e){var t;return!(null!=e&&null!==(t=e.data)&&void 0!==t&&t.disabled)}).map(function(e){var t="integration_".concat(e.id),n=null!=e&&e.full_logo?p["".concat(e.full_logo,"Logo")]:p.BrokenImageFull;return{customAttributes:{"data-test-id":"setup-wizard-screen-03-integration-".concat(e.id)},id:t,labelAttributes:{label:e.title},name:"integration",type:"image",value:e.id,children:n?i.q_.createElement(n,null):null}}),O=f();v(function(){3===b&&O.current&&O.current.focus()},[b]);var B={ref:(0,s.rM)(3===b&&w),className:(0,i.pS)((0,r.A)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(3),!0)),"aria-hidden":3!==b,"data-test-id":"setup-wizard-screen-03"};return i.q_.createElement("div",B,i.q_.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},i.q_.createElement(i.mM,{scrollableNodeProps:{ref:O}},i.q_.createElement("div",{className:"gravitysmtp-setup-wizard__content"},i.q_.createElement(c.A,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:6},i.q_.createElement(u.A,{content:g,spacing:4,size:"display-sm",tagName:"h2",weight:"medium"}),i.q_.createElement(o.A,{content:m,spacing:8})),i.q_.createElement(l.A,{customClasses:["gravitysmtp-setup-wizard__content-cards","gform-grid--container","gform-grid--wrap","gform-grid--row-spacing-6","gform-grid--col-spacing-6"],data:N,id:"integrations",inputType:"radio",initialValue:function(){for(var e=0,t=Object.entries(k);e<t.length;e++){var n=(0,a.A)(t[e],2),r=n[0];if(n[1].enabled)return r}return""}(),onChange:function(e,t){return h(t.target.value)},useWrapper:!0,wrapperAttributes:{customClasses:["gravitysmtp-setup-wizard__content-card","gform-grid--item"]}}),i.q_.createElement(d.default,{i18n:n,backButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-03-back-button"},onClick:function(){x(2),S()}},skipButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-03-skip-button"},onClick:function(){C("skipped"),q("skip"),x(5),z(5)}},nextButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-03-next-button"},disabled:!A,onClick:function(){q("next"),x(4),E()}}})))))}},49445:function(e,t,n){var r=n(88856),a=n(90455),i=n(52888),s=n(8140),c=n(78564),u=n.n(c),o=n(27122),l=n.n(o),d=n(32352),p=n(91820),_=n(40388),v=n(21713),f=n(30242),g=n(5529),m=n(66598),y=n(83852),b=n(65224),w=n(18698),A=n(83707),k=n(93313),h=n(68381),x=n(57290),z=d.q_.useEffect,E=d.q_.useRef,S=d.q_.useState;t.default=function(e){var t,n,c,o=e.data,q=e.endpoints,C=e.i18n,N=C.debug_messages,O=void 0===N?{}:N,B=O.migrating_data,P=O.migrating_data_error,J=C.setup_wizard_next_button,M=C.setup_wizard_import_data_title,j=C.setup_wizard_import_data_copy,D=o.import_data,I=o.integrations,T=(0,x.default)(function(e){return e.activeStep}),L=(0,x.default)(function(e){return e.isAnimatedIn}),F=(0,x.default)(function(e){return e.importPlugin}),R=(0,x.default)(function(e){return e.setActiveStepNext}),V=(0,x.default)(function(e){return e.setHasDebugError}),H=(0,x.default)(function(e){return e.setImportPlugin}),U=(0,x.default)(function(e){return e.setIntegrationSettingsFormData}),W=(0,x.default)(function(e){return e.setSettingsUpdated}),G=(null==q||null===(t=q.migrate_settings)||void 0===t?void 0:t.action)||"",K=(null==q||null===(n=q.migrate_settings)||void 0===n?void 0:n.nonce)||"",X=S(!1),Q=(0,s.A)(X,2),Y=Q[0],Z=Q[1],$=function(e,t,n){e.forEach(function(e){var r,a;((null===(r=e.props)||void 0===r?void 0:r.name)===t||"InputGroup"===e.component&&(null===(a=e.props)||void 0===a?void 0:a.id)==="".concat(t,"_group"))&&("Toggle"===e.component?e.props.initialChecked=n:"InputGroup"===e.component?e.props.initialValue=n:e.props.value=n),e.fields&&$(e.fields,t,n)})},ee=function(e,t){e.forEach(function(e){var n=t[e.id];"object"!==(0,i.A)(n)||null===n||Array.isArray(n)||Object.entries(n).forEach(function(t){var n=(0,s.A)(t,2),r=n[0],a=n[1];e.settings&&Array.isArray(e.settings.fields)&&$(e.settings.fields,r,a)})})},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(e).forEach(function(e){var t=(0,s.A)(e,2),n=t[0],r=t[1];"object"===(0,i.A)(r)&&null!==r&&!Array.isArray(r)&&Object.keys(r).length>0&&Object.entries(r).forEach(function(e){var t=(0,s.A)(e,2),r=t[0],a=t[1];U(n,r,a)})})},ne=function(){var e=(0,a.A)(u().mark(function e(){var t,n,r,a,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={action:G,security:K,plugin_to_migrate:F},e.next=4,(0,A.A)((0,v.nv)(B,JSON.stringify((0,k.A)(["security"],n))),"info");case 4:return e.next=6,(0,_.bE)({endpoint:l(),body:n});case 6:if(r=e.sent,Z(!1),null!=r&&null!==(t=r.data)&&void 0!==t&&t.success){e.next=15;break}return console.error(null==r?void 0:r.error),e.next=12,(0,A.A)((0,v.nv)(P,JSON.stringify(null==r?void 0:r.error)),"error");case 12:V(!0),e.next=19;break;case 15:te(null==r||null===(a=r.data)||void 0===a?void 0:a.data),ee(I,null==r||null===(i=r.data)||void 0===i?void 0:i.data),W(),(0,h.A)({key:"migrations_used",value:[F]});case 19:e.next=27;break;case 21:return e.prev=21,e.t0=e.catch(0),console.error(e.t0),e.next=26,(0,A.A)((0,v.nv)(P,JSON.stringify(e.t0)),"error");case 26:V(!0);case 27:case"end":return e.stop()}},e,null,[[0,21]])}));return function(){return e.apply(this,arguments)}}(),re=D.filter(function(e){return e.activated}).map(function(e){var t="import_data_".concat(e.id),n=w["".concat(e.logo,"Logo")];return{id:t,labelAttributes:{label:e.title},name:"import_data",type:"image",value:e.id,children:d.q_.createElement(n,null)}}),ae=E();z(function(){2===T&&ae.current&&ae.current.focus()},[T]);var ie,se={ref:(0,p.rM)(2===T&&L),className:(0,d.pS)((0,r.A)({"gravitysmtp-setup-wizard__screen":!0},"gravitysmtp-setup-wizard__screen--step-".concat(2),!0)),"aria-hidden":2!==T,"data-test-id":"setup-wizard-screen-02"},ce=(null===(c=D.filter(function(e){return e.activated&&e.initialChecked})[0])||void 0===c?void 0:c.id)||"";return d.q_.createElement("div",se,d.q_.createElement("div",{className:"gravitysmtp-setup-wizard__screen-inner"},d.q_.createElement(d.mM,{scrollableNodeProps:{ref:ae}},d.q_.createElement("div",{className:"gravitysmtp-setup-wizard__content"},d.q_.createElement(f.A,{customClasses:["gravitysmtp-setup-wizard__content-header"],spacing:6},d.q_.createElement(g.A,{content:M,spacing:4,size:"display-sm",tagName:"h2",weight:"medium"}),d.q_.createElement(m.A,{content:j,spacing:8})),d.q_.createElement(y.A,{customClasses:["gravitysmtp-setup-wizard__content-cards","gform-grid--container","gform-grid--wrap","gform-grid--row-spacing-6","gform-grid--col-spacing-6"],data:re,id:"import_data",inputType:"radio",initialValue:ce,onChange:function(e,t){return H(t.target.value)},useWrapper:!0,wrapperAttributes:{customClasses:["gravitysmtp-setup-wizard__content-card","gform-grid--item"]}}),d.q_.createElement(b.default,{i18n:C,backButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-02-back-button"}},nextButtonCustomAttributes:{disabled:!F||Y,onClick:(ie=(0,a.A)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,ne();case 3:R();case 4:case"end":return e.stop()}},e)})),function(){return ie.apply(this,arguments)}),active:Y,activeType:"loader",activeText:J,icon:Y?"":"arrow-narrow-right",lockSize:!0,customAttributes:{"data-test-id":"setup-wizard-screen-02-next-button"}},skipButtonCustomAttributes:{customAttributes:{"data-test-id":"setup-wizard-screen-02-skip-button"}}})))))}},53015:function(e,t,n){var r,a=n(40450),i=n.n(a),s=(null===(r=(0,n(21713).zj)(i(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{};t.A=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(null==s||null===(e=s.data)||void 0===e||null===(e=e.locked_settings)||void 0===e?void 0:e.includes(t))||n}},68381:function(e,t,n){var r,a=n(90455),i=n(78564),s=n.n(i),c=n(27122),u=n.n(c),o=n(40450),l=n.n(o),d=n(40388),p=n(21713),_=n(83707),v=n(93313),f=n(53015),g=(null===(r=(0,p.zj)(l(),"gravitysmtp_admin_config"))||void 0===r?void 0:r.common)||{},m=function(e){var t=e.addSnackbarMessage,n=e.key,r=e.saveSuccessSnackBarMessage,a=e.showSnackBarSuccess,i=e.updateData,s=e.value;i[n]&&(i[n]=s),a&&t(r,"success")},y=function(e){var t=e.addSnackbarMessage,n=e.error,r=e.saveErrorSnackBarMessage,a=e.showSnackBarError;console.error(n),a&&t(r,"error")},b=function(){var e=(0,a.A)(s().mark(function e(t){var n,r,a,i,c,o,l,b,w,A,k,h,x,z,E,S,q,C,N,O,B,P,J,M,j,D,I,T,L,F,R,V,H,U,W,G,K,X,Q,Y,Z,$,ee,te,ne;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.addSnackbarMessage,r=void 0===n?function(){}:n,a=t.errorCallback,i=void 0===a?null:a,c=t.key,o=void 0===c?"":c,l=t.showSnackBarError,b=void 0===l||l,w=t.showSnackBarSuccess,A=void 0!==w&&w,k=t.snackBarErrorMessage,h=void 0===k?"":k,x=t.snackBarSuccessMessage,z=void 0===x?"":x,E=t.successCallback,S=void 0===E?null:E,q=t.updateData,C=void 0===q?{}:q,N=t.useDebugLogger,O=void 0===N||N,B=t.value,P=void 0===B?"":B,!(0,f.A)(o)){e.next=3;break}return e.abrupt("return");case 3:if(J=g.i18n,j=(M=void 0===J?{}:J).snackbar_generic_update_error,D=void 0===j?"":j,I=M.snackbar_generic_update_success,T=void 0===I?"":I,L=M.debug_messages,R=(F=void 0===L?{}:L).saving_plugin_settings,V=void 0===R?"":R,H=F.saving_plugin_settings_error,U=void 0===H?"":H,W=g.endpoints,G=(void 0===W?{}:W).save_plugin_settings,X=(K=void 0===G?{}:G).action,Q=void 0===X?"":X,Y=K.nonce,Z=z||T,$=h||D,ee={action:Q,security:void 0===Y?"":Y,key:o,value:P},!O){e.next=10;break}return e.next=10,(0,_.A)((0,p.nv)(V,JSON.stringify((0,v.A)(["security"],ee))),"info");case 10:return e.prev=10,e.next=13,(0,d.bE)({endpoint:u(),body:ee});case 13:null!=(ne=e.sent)&&null!==(te=ne.data)&&void 0!==te&&te.success?(S||m)({addSnackbarMessage:r,data:null==ne?void 0:ne.data,key:o,saveSuccessSnackBarMessage:Z,showSnackBarSuccess:A,updateData:C,value:P}):(i||y)({addSnackbarMessage:r,error:null==ne?void 0:ne.error,saveErrorSnackBarMessage:$,showSnackBarError:b}),e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(10),console.error(e.t0),!O){e.next=23;break}return e.next=23,(0,_.A)((0,p.nv)(U,JSON.stringify(e.t0)),"error");case 23:case"end":return e.stop()}},e,null,[[10,17]])}));return function(t){return e.apply(this,arguments)}}();t.A=b}}]);