"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[4806],{27764:function(e,t,n){var i,s=n(40450),r=n.n(s),a=(null===(i=(0,n(21713).zj)(r(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};t.A=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{iconPrefix:"gravitysmtp-admin-icon",locked:(null==a||null===(e=a.data)||void 0===e||null===(e=e.locked_settings)||void 0===e?void 0:e.includes(n))||i,lockedMessage:s||(null==a||null===(t=a.i18n)||void 0===t?void 0:t.setting_locked)||""}}},83707:function(e,t,n){n.d(t,{A:function(){return m}});var i,s=n(90455),r=n(78564),a=n.n(r),o=n(27122),l=n.n(o),c=n(40450),u=n.n(c),d=n(40388),_=(null===(i=(0,n(21713).zj)(u(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{};function m(){return p.apply(this,arguments)}function p(){return p=(0,s.A)(a().mark(function e(){var t,n,i,s,r,o,c,u,m,p,g=arguments;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=g.length>0&&void 0!==g[0]?g[0]:"",s=g.length>1&&void 0!==g[1]?g[1]:"debug",r=_.data,o=void 0===r?{}:r,c=_.endpoints,m=(null==(u=void 0===c?{}:c)||null===(t=u.log_debug_item)||void 0===t?void 0:t.action)||"",p=(null==u||null===(n=u.log_debug_item)||void 0===n?void 0:n.nonce)||"",null!=o&&o.debug_log_enabled&&m&&p&&i){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,d.bE)({endpoint:l(),body:{action:m,security:p,message:i,priority:s}}).catch(function(e){console.error(e)});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)})),p.apply(this,arguments)}},91614:function(e,t,n){var i=n(71860),s=n(90455),r=n(8140),a=n(88856),o=n(78564),l=n.n(o),c=n(27122),u=n.n(c),d=n(32352),_=n(40388),m=n(21713),p=n(82263),g=n(30242),b=n(80509),f=n(5529),v=n(25787),h=n(53377),y=n(13379),A=n(84860),x=n(66598),q=n(16265),E=n(83707),w=n(93313),k=n(27764);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=d.q_.forwardRef,C=d.q_.useEffect,P=d.q_.useLayoutEffect,N=d.q_.useState,S=d.q_.useRef,T=d.tm.useSearchParams,F=j(function(e,t){var n,a,o=e.customAttributes,c=void 0===o?{}:o,z=e.customClasses,j=void 0===z?[]:z,F=e.common,B=void 0===F?{}:F,D=e.data,J=void 0===D?{}:D,R=e.i18n,W=void 0===R?{}:R,G=O({className:(0,d.pS)({"gravitysmtp-tools-app__send-a-test":!0},j)},c),H=W||{},I=H.debug_messages,L=I.sending_test_email,M=void 0===L?"":L,V=I.sending_test_email_error,K=void 0===V?"":V,Q=H.send_a_test,U=void 0===Q?{}:Q,X=U.top_heading,Y=U.top_content,Z=U.send_test_box_heading,$=U.send_test_box_input_label,ee=U.send_test_box_input_placeholder,te=U.send_test_box_input_description,ne=U.send_test_box_from_label,ie=U.send_test_box_from_placeholder,se=U.send_test_box_from_description,re=U.send_test_box_send_with_label,ae=U.send_test_box_send_with_description,oe=U.send_test_box_send_as_html_label,le=U.send_test_box_send_as_html_description,ce=U.send_test_box_alerts_button_label,ue=U.send_test_box_try_again_button_label,de=U.send_test_box_error_issue_heading,_e=U.send_test_box_error_possible_reasons_heading,me=U.send_test_box_error_recommended_steps_heading,pe=U.send_test_box_view_log_button_label,ge=U.send_test_box_copy_log_button_label,be=U.send_test_box_copy_log_success_message,fe=((null==B?void 0:B.data)||{}).test_mode_enabled,ve=(null==B?void 0:B.i18n)||{},he=ve.snackbar_send_test_mail_error,ye=ve.snackbar_send_test_mail_success,Ae=J.caps,xe=void 0===Ae?{}:Ae,qe=J.integrations,Ee=(void 0===qe?[]:qe).filter(function(e){return!e.data.disabled&&e.data.configured}),we=Ee.map(function(e){return{label:(null==e?void 0:e.title)||"",value:(null==e?void 0:e.id)||""}}),ke=!!Ee.length,ze=ke?Ee.find(function(e){return e.data.is_primary})||Ee[0]:{},Oe=fe||!ke,je=T(),Ce=(0,r.A)(je,2),Pe=Ce[0],Ne=(Ce[1],Pe.get("integration")||""),Se=N(!1),Te=(0,r.A)(Se,2),Fe=Te[0],Be=Te[1],De=N(!1),Je=(0,r.A)(De,2),Re=Je[0],We=Je[1],Ge=N({}),He=(0,r.A)(Ge,2),Ie=He[0],Le=He[1],Me=N(""),Ve=(0,r.A)(Me,2),Ke=Ve[0],Qe=Ve[1],Ue=N(""),Xe=(0,r.A)(Ue,2),Ye=Xe[0],Ze=Xe[1],$e=N(Ne||(null==ze?void 0:ze.id)||""),et=(0,r.A)($e,2),tt=et[0],nt=et[1],it=N(!0),st=(0,r.A)(it,2),rt=st[0],at=st[1],ot=N(""),lt=(0,r.A)(ot,2),ct=lt[0],ut=lt[1],dt=(null==B||null===(n=B.endpoints)||void 0===n||null===(n=n.send_test)||void 0===n?void 0:n.action)||"",_t=(null==B||null===(a=B.endpoints)||void 0===a||null===(a=a.send_test)||void 0===a?void 0:a.nonce)||"",mt=S(!0),pt=S(null),gt=S(null),bt=S(null),ft=S(null),vt=S(null),ht=N(!1),yt=(0,r.A)(ht,2),At=yt[0],xt=yt[1],qt=(0,d.pS)({"gravitysmtp-tools-app__send-a-test-trigger--sending":Fe});C(function(){At&&vt.current&&(vt.current.focus(),xt(!1))},[At]),P(function(){mt.current?mt.current=!1:pt&&bt&&(Re?bt.current.focus():pt.current&&pt.current.focus())},[Re]);var Et=(0,A.dh)(),wt=function(){var e=(0,s.A)(l().mark(function e(){var t,n,i,s,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Ke&&""!==tt){e.next=2;break}return e.abrupt("return");case 2:return ut(ft.current.offsetWidth),Be(!0),t={action:dt,security:_t,email:Ke,connector_type:tt,as_html:rt?"true":"false",from_email:Ye},e.next=7,(0,E.A)((0,m.nv)(M,JSON.stringify((0,w.A)(["security"],t))),"info");case 7:return e.prev=7,e.next=10,(0,_.bE)({endpoint:u(),body:t});case 10:i=e.sent,Be(!1),null!=i&&null!==(n=i.data)&&void 0!==n&&n.success?Et(ye):null!=i&&null!==(s=i.error)&&void 0!==s&&null!==(s=s.detail)&&void 0!==s&&s.data?(r=(0,m.Fh)(i.error.detail.data)?JSON.parse(i.error.detail.data):"",(0,m.Gv)(r.data)?(Le(r.data),We(!0)):Et(r.data||he,"error")):Et(he,"error"),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(7),Et(e.t0.message,"error"),e.next=20,(0,E.A)((0,m.nv)(K,JSON.stringify(e.t0)),"error");case 20:case"end":return e.stop()}},e,null,[[7,15]])}));return function(){return e.apply(this,arguments)}}(),kt=Re?1200:630;return xe.gravitysmtp_view_tools_sendatest&&d.q_.createElement("div",(0,i.A)({},G,{ref:t}),d.q_.createElement(f.A,{size:"display-sm",weight:"semibold",spacing:1,content:X}),d.q_.createElement(x.A,{size:"text-sm",spacing:6,color:"comet",content:Y}),d.q_.createElement(y.A,{HeaderContent:function(e){return d.q_.createElement(d.q_.Fragment,null,d.q_.createElement(f.A,(0,i.A)({content:Z,size:"text-lg",weight:"medium"},e)))},FooterContent:function(e){return Re?d.q_.createElement(b.A,(0,i.A)({label:ue,onClick:function(){We(!1),Qe(""),Ze(""),Le({})},size:"size-height-m"},e)):d.q_.createElement(b.A,(0,i.A)({active:Fe,activeType:"loader",customAttributes:{"data-test-id":"send-a-test-email-trigger",style:{width:"".concat(ct,"px")}},customClasses:qt,disabled:Oe,icon:"paper-plane",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ce,onClick:wt,ref:ft,size:"size-height-m"},e))}},d.q_.createElement(g.A,{x:kt},Re?d.q_.createElement(d.q_.Fragment,null,d.q_.createElement(g.A,{x:630},d.q_.createElement(p.A,{theme:"cosmos",type:"error",customIconPrefix:"gravitysmtp-admin-icon",content:Ie.error_message,spacing:[2,0,6,0]})),(null==Ie?void 0:Ie.issues)&&Ie.issues.length>0&&Ie.issues[0]&&d.q_.createElement(d.q_.Fragment,null,d.q_.createElement(f.A,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:de}),d.q_.createElement(x.A,{size:"text-sm",spacing:5},d.q_.createElement("ul",{className:"gform-list--bulleted"},Ie.issues.map(function(e,t){return d.q_.createElement("li",{key:"issues-".concat(t)},e)})))),(null==Ie?void 0:Ie.possible_reasons)&&Ie.possible_reasons.length>0&&d.q_.createElement(d.q_.Fragment,null,d.q_.createElement(f.A,{size:"text-sm",tagName:"h5",weight:"medium",spacing:5,content:_e}),d.q_.createElement(x.A,{size:"text-sm",spacing:5},d.q_.createElement("ul",{className:"gform-list--bulleted"},Ie.possible_reasons.map(function(e,t){return d.q_.createElement("li",{key:"possible-reasons-".concat(t)},e)})))),(null==Ie?void 0:Ie.recommended_steps)&&Ie.recommended_steps.length>0&&d.q_.createElement(d.q_.Fragment,null,d.q_.createElement(f.A,{size:"text-sm",tagName:"h5",weight:"medium",spacing:3,content:me}),d.q_.createElement(x.A,{size:"text-sm",spacing:5},d.q_.createElement("ul",{className:"gform-list--bulleted"},Ie.recommended_steps.map(function(e,t){return d.q_.createElement("li",{key:"recommended-steps-".concat(t)},e)})))),d.q_.createElement(g.A,{display:"flex",spacing:2},d.q_.createElement(b.A,{label:pe,onClick:function(){window.location.href="//".concat(window.location.host).concat(window.location.pathname,"?page=gravitysmtp-activity-log&tab=log-details&event_id=").concat(Ie.full_log.log_id)},size:"size-height-m",spacing:[0,3,0,0],type:"white",ref:bt}),d.q_.createElement(b.A,{icon:"copy",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:ge,onClick:function(){(0,m.Ns)(Ie.log_copy),Et(be),xt(!0)},ref:vt,size:"size-height-m",type:"white"}))):d.q_.createElement(d.q_.Fragment,null,d.q_.createElement(v.A,{labelAttributes:{label:$},helpTextAttributes:{content:te},placeholder:ee,onChange:function(e){return Qe(e)},type:"email",disabled:Oe,customAttributes:{"data-test-id":"send-a-test-email-input",ref:pt},spacing:6}),d.q_.createElement(v.A,{labelAttributes:{label:ne},helpTextAttributes:{content:se},placeholder:ie,onChange:function(e){return Ze(e)},type:"email",disabled:Oe,customAttributes:{"data-test-id":"send-a-test-from-email",ref:gt},spacing:6}),ke&&d.q_.createElement(h.A,{customAttributes:{"data-test-id":"send-a-test-integration"},initialValue:tt,labelAttributes:{label:re},helpTextAttributes:{content:ae},name:"integration",onChange:function(e){return nt(e)},options:we,disabled:Oe,spacing:6}),d.q_.createElement(q.A,{customAttributes:{"data-test-id":"send-a-test-html"},initialChecked:rt,labelAttributes:O({label:oe},(0,k.A)("send-a-test-html")),helpTextAttributes:{content:le,size:"text-sm"},helpTextWidth:"full",labelPosition:"left",id:"send-a-test-html",name:"send-a-test-html",onChange:function(e){return at(e)},size:"size-m",width:"full",disabled:Oe})))))});F.propTypes={customAttributes:d.By.object,customClasses:d.By.oneOfType([d.By.string,d.By.array,d.By.object])},F.displayName="SendATestScreen",t.default=F},93313:function(e,t,n){var i=n(52888),s=n(8140);t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*",n=function(r){return Object.entries(r).reduce(function(r,a){var o=(0,s.A)(a,2),l=o[0],c=o[1];return"object"===(0,i.A)(c)&&null!==c?r[l]=n(c):e.includes(l)?r[l]=null===c?null:t.repeat(c.length):r[l]=c,r},Array.isArray(r)?[]:{})};return n(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}}]);