"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[2217],{36770:function(e,t,n){n.d(t,{A:function(){return c}});var i,a,r=n(40450),o=n.n(r),l=(null===(i=(0,n(21713).zj)(o(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.common)||{},s=(null==l||null===(a=l.feature_flags)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.statuses)||{};function c(){return s[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||!1}},52217:function(e,t,n){n.d(t,{default:function(){return Q}});var i,a=n(71860),r=n(88856),o=n(90455),l=n(8140),s=n(78564),c=n.n(s),d=n(27122),m=n.n(d),u=n(32352),_=n(40388),g=n(91820),v=n(21713),p=n(84860),y=n(30242),f=n(80509),b=n(29549),h=n(5529),A=n(25980),x=n(87029),E=n(82263),q=n(13379),w=n(43632),k=n(66598),C=n(22397),z=n(83707),j=n(93313),O=n(36770),P=n(40450),S=n.n(P);function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var N=(null===(i=(0,v.zj)(S(),"gravitysmtp_admin_config"))||void 0===i?void 0:i.components)||{};var D=n(98895);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var B=u.q_.forwardRef,G=u.q_.useEffect,F=u.q_.useState,M=u.q_.useRef,R=u.tm.useLocation,U=u.tm.useNavigate,J=u.tm.useSearchParams,K=["date","from","to","cc","bcc","subject"],V=[{key:"status",icon:"exclamation-circle"},{key:"service",icon:"cloud1"},{key:"log_id",icon:"document-text"}];(0,O.A)("email_open_tracking")&&function(){var e,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("."),i=N,a=L(n);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(!i||!(r in i))return t;i=i[r]}}catch(e){a.e(e)}finally{a.f()}return void 0!==i?i:t}("activity_log.data.open_tracking_enabled")&&V.push({key:"opened",icon:"mail-open"}),V.push({key:"source",icon:"cog"});var $=B(function(e,t){var n,i,r=e.common,s=void 0===r?{}:r,d=e.data,O=void 0===d?{}:d,P=e.i18n,S=void 0===P?{}:P,L=U(),T=R(),N=(0,D.default)(function(e){return e.setSingleActivityDialogOpen}),H=(0,D.default)(function(e){return e.setSingleActivityEventId}),B=(0,D.default)(function(e){return e.setSingleActivityType}),$=(0,D.default)(function(e){return e.setViewEmailDialogOpen}),Q=(0,D.default)(function(e){return e.setViewEmailEventProperties}),W=(0,D.default)(function(e){return e.setLogDetail}),X=window.matchMedia("(min-width: 640px)"),Y=F(X.matches),Z=(0,l.A)(Y,2),ee=Z[0],te=Z[1],ne=F(!1),ie=(0,l.A)(ne,2),ae=ie[0],re=ie[1],oe=J(),le=(0,l.A)(oe,2),se=le[0],ce=le[1],de=se.get("event_id"),me=M(),ue=(null==s||null===(n=s.endpoints)||void 0===n||null===(n=n.get_single_email)||void 0===n?void 0:n.action)||"",_e=(null==s||null===(i=s.endpoints)||void 0===i||null===(i=i.get_single_email)||void 0===i?void 0:i.nonce)||"",ge=(0,p.dh)();G(function(){var e=function(e){return te(e.matches)};return X.addListener(e),function(){return X.removeListener(e)}},[X]);var ve=(0,D.default)(function(e){return e.logDetail}),pe=(null==ve?void 0:ve.technical_information)||[],ye=S||{},fe=ye.debug_messages,be=void 0===fe?{}:fe,he=be.fetching_single_activity_log,Ae=void 0===he?"":he,xe=be.fetching_single_activity_log_error,Ee=void 0===xe?"":xe,qe=ye.log_detail,we=void 0===qe?{}:qe,ke=we.top_heading,Ce=void 0===ke?"":ke,ze=we.top_error,je=void 0===ze?"":ze,Oe=we.action_button_view_email_label,Pe=void 0===Oe?"":Oe,Se=we.action_button_resend_label,Le=void 0===Se?"":Se,Te=(we.action_button_print_label,we.action_button_export_label,we.action_button_delete_label),Ne=void 0===Te?"":Te,De=we.back_button_label,He=void 0===De?"":De,Ie=we.main_box_heading,Be=void 0===Ie?"":Ie,Ge=we.nav_button_next_title,Fe=void 0===Ge?"":Ge,Me=we.nav_button_prev_title,Re=void 0===Me?"":Me,Ue=we.secondary_box_heading,Je=void 0===Ue?"":Ue,Ke=we.sidebar_status_heading,Ve=void 0===Ke?"":Ke,$e=we.sidebar_attachments_heading,Qe=void 0===$e?"":$e,We=(null==s?void 0:s.i18n)||{},Xe=We.aria_label_collapsed_metabox,Ye=void 0===Xe?"":Xe,Ze=We.aria_label_expanded_metabox,et=void 0===Ze?"":Ze,tt=We.snackbar_email_log_detail_empty_error,nt=void 0===tt?"":tt,it=We.snackbar_email_log_detail_generic_error,at=void 0===it?"":it,rt=(null==O?void 0:O.caps)||{};G(function(){window.scrollTo(0,0)},[]);var ot=function(){var e=(0,o.A)(c().mark(function e(){var t,n,i,a,r,o;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return re(!0),t={action:ue,security:_e,event_id:de},e.next=4,(0,z.A)((0,v.nv)(Ae,JSON.stringify((0,j.A)(["security"],t))),"info");case 4:return e.prev=4,e.next=7,(0,_.bE)({endpoint:m(),body:t});case 7:if(i=e.sent,re(!1),null==i||null===(n=i.data)||void 0===n||!n.success){e.next=17;break}if(o=null==i||null===(a=i.data)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.log_detail,(!Array.isArray(o)||o.length)&&o){e.next=14;break}return ge(nt,"error"),e.abrupt("return");case 14:W((null==i||null===(r=i.data)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.log_detail)||{}),e.next=18;break;case 17:ge(at,"error");case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(4),ge(e.t0.message,"error"),e.next=25,(0,z.A)((0,v.nv)(Ee,JSON.stringify(e.t0)),"error");case 25:case"end":return e.stop()}},e,null,[[4,20]])}));return function(){return e.apply(this,arguments)}}();G(function(){me.current?de&&ot():me.current=!0},[de]);var lt=function(){return u.q_.createElement(u.q_.Fragment,null,u.q_.createElement(y.A,{spacing:4},u.q_.createElement(b.A,{container:!0,alignItems:"flex-start",elementType:"div",justifyContent:"flex-start",rowSpacing:4,type:"fluid",wrap:!ee},u.q_.createElement(b.A,{item:!0,elementType:"div",customAttributes:{style:{flex:ee?"auto":"0 0 100%"}}},u.q_.createElement(h.A,{content:Ce,size:"display-sm",weight:"semibold",tagName:"h2"})))),ve.log_id?u.q_.createElement(b.A,{container:!0,alignItems:"flex-start",elementType:"div",justifyContent:"flex-start",type:"fluid",wrap:!ee},u.q_.createElement(b.A,{item:!0,elementType:"div",customAttributes:{style:{flex:ee?"auto":"0 0 100%"}}},u.q_.createElement(f.A,{customAttributes:{title:He},icon:"left-arrow",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){var e;if("activity-log"===(null==T||null===(e=T.state)||void 0===e?void 0:e.previous))L(-1);else{var t=new URLSearchParams(T.search),n=O.nav_item_param_key||"tab";t.set(n,"activity-log"),t.delete("event_id");var i=I(I({},T),{},{search:"?".concat(t.toString())});L(i,{state:{previous:"log-details"}})}},size:"size-height-m",spacing:[0,4,4,0],type:"icon-white"}),u.q_.createElement(f.A,{icon:"eye",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:Pe,onClick:function(){Q({date:ve.date,isHtml:ve.is_html,id:ve.log_id,fromHash:ve.fromHash,from:ve.from,to:ve.to,title:ve.subject}),$(!0)},spacing:[0,4,4,0],size:"size-height-m",type:"white",disabled:!rt.gravitysmtp_view_email_log_preview}),u.q_.createElement(f.A,{icon:"paper-plane",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:Le,onClick:function(){N(!0),H(ve.log_id),B("resend")},size:"size-height-m",spacing:[0,4,4,0],type:"white",disabled:!ve.can_resend}),u.q_.createElement(f.A,{icon:"trash",iconPosition:"leading",iconPrefix:"gravitysmtp-admin-icon",label:Ne,onClick:function(){N(!0),H(ve.log_id),B("delete")},size:"size-height-m",spacing:[0,0,4,0],type:"amaranth-red",disabled:!rt.gravitysmtp_delete_email_log_details})),u.q_.createElement(b.A,{item:!0,elementType:"div",customAttributes:{style:{flex:"none"}}},u.q_.createElement(f.A,{customAttributes:{title:Re},disabled:null===ve.next_id||ae,icon:"left-arrow",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){ce(I(I({},(0,v.K_)()),{},{event_id:ve.next_id}))},size:"size-height-s",spacing:[0,2,0,0],type:"icon-white"}),u.q_.createElement(f.A,{customAttributes:{title:Fe},disabled:null===ve.prev_id||ae,icon:"right-arrow",iconPrefix:"gravitysmtp-admin-icon",onClick:function(){ce(I(I({},(0,v.K_)()),{},{event_id:ve.prev_id}))},size:"size-height-s",type:"icon-white"}))):u.q_.createElement(E.A,{theme:"cosmos",type:"error",customIconPrefix:"gravitysmtp-admin-icon",content:je,spacing:[6,0,6,0]}))},st=function(e){return u.q_.createElement(k.A,(0,a.A)({customClasses:["gravitysmtp-log-details__secondary-box-entry"],size:"text-sm"},e))},ct=function(e){var t=e.id;return e.data.map(function(e,n){var i="".concat(t,"-").concat(n);return Array.isArray(e)?u.q_.createElement(ct,{key:i,id:i,data:e}):(0,v.Gv)(e)?u.q_.createElement(dt,{key:i,id:i,data:e,isTopLevel:!1}):u.q_.createElement(st,{key:i,content:e,spacing:4})})},dt=function(e){var t=e.id,n=e.data,i=e.isTopLevel;return Object.keys(n).map(function(e,a){var r=n[e],o="".concat(t,"-").concat(e,"-").concat(a);return Array.isArray(r)?u.q_.createElement(ct,{key:o,id:o,data:r}):(0,v.Gv)(r)?u.q_.createElement(y.A,{key:o,spacing:4},u.q_.createElement(k.A,{customClasses:["gravitysmtp-log-details__secondary-box-entry"],content:e,size:"text-sm",weight:"medium"}),u.q_.createElement(dt,{id:o,data:r,isTopLevel:!1})):i?u.q_.createElement(y.A,{key:o,spacing:4},u.q_.createElement(k.A,{customClasses:["gravitysmtp-log-details__secondary-box-entry"],content:e,size:"text-sm",weight:"medium"}),u.q_.createElement(st,{content:r})):u.q_.createElement(st,{key:o,content:"".concat(e,": ").concat(r)})})},mt=function(e){var t=e.id,n=e.data,i=e.isLast,a=null;return a=Array.isArray(n)?u.q_.createElement(ct,{id:t,data:n}):(0,v.Gv)(n)?u.q_.createElement(dt,{id:t,data:n,isTopLevel:!0}):u.q_.createElement(st,{content:n}),u.q_.createElement(q.A,{collapsed:"headers"===t,collapsible:"headers"===t,contentId:"gravitysmtp-log-details__secondary-box-".concat(t),customClasses:["gravitysmtp-log-details__secondary-box-".concat(t)],HeaderContent:function(){var e,n;return"headers"===t?u.q_.createElement(k.A,{content:(null==S||null===(e=S.log_detail)||void 0===e?void 0:e.secondary_box_headers_heading)||"",size:"text-md",weight:"medium",tagName:"span"}):u.q_.createElement(h.A,{content:(null==S||null===(n=S.log_detail)||void 0===n?void 0:n.secondary_box_log_heading)||"",size:"text-md",weight:"medium",tagName:"h3"})},i18n:{collapsedAriaLabel:Ye,expandedAriaLabel:et},collapsibleIconPrefix:"gravitysmtp-admin-icon",spacing:i?"":6},a)},ut=function(){return u.q_.createElement(h.A,{content:Je,size:"text-lg",weight:"medium",tagName:"h2"})},_t=function(){var e=Object.keys(pe).filter(function(e){var t=pe[e];return Array.isArray(t)?!!t.length:(0,v.Gv)(t)?!(0===Object.keys(t).length&&t.constructor===Object):!!t});return u.q_.createElement(q.A,{customClasses:["gravitysmtp-log-details__secondary-box"],HeaderContent:ut},e.map(function(t,n){return u.q_.createElement(mt,{key:t,id:t,data:pe[t],isLast:n===e.length-1})}))},gt=function(){return u.q_.createElement(h.A,{content:Ve,size:"text-lg",weight:"medium",tagName:"h2"})},vt=function(){return u.q_.createElement(u.q_.Fragment,null,u.q_.createElement(q.A,{customClasses:["gravitysmtp-log-details__sidebar-box"],HeaderContent:gt},V.map(function(e,t){var n,i=e.key,r=e.icon;return u.q_.createElement(y.A,{key:i,customClasses:["gravitysmtp-log-details__sidebar-item"],display:"flex",spacing:0!==t?[3,0,0,0]:void 0},u.q_.createElement(A.A,{icon:r,iconPrefix:"gravitysmtp-admin-icon",customClasses:["gravitysmtp-log-details__sidebar-item-icon"],spacing:[0,1,0,0]}),u.q_.createElement(k.A,{content:null==S||null===(n=S.log_detail)||void 0===n?void 0:n["sidebar_".concat(i,"_label")],customClasses:["gravitysmtp-log-details__sidebar-item-label"],size:"text-sm",spacing:[0,1,0,0],weight:"regular"}),"status"===i?u.q_.createElement(w.A,(0,a.A)({},(null==ve?void 0:ve[i])||{},{customClasses:["gravitysmtp-log-details__sidebar-item-value"]})):u.q_.createElement(k.A,{color:"comet",content:null==ve?void 0:ve[i],customClasses:["gravitysmtp-log-details__sidebar-item-value"],size:"text-sm"}))})),null!=ve&&ve.has_attachment?u.q_.createElement(q.A,{HeaderContent:function(){return u.q_.createElement(h.A,{content:Qe,size:"text-lg",weight:"medium",tagName:"h2"})},spacing:[6,0,0,0]},ve.attachments.map(function(e,t){return u.q_.createElement(y.A,{key:"attachment-".concat(t),customClasses:["gravitysmtp-log-details__sidebar-item"],display:"flex",spacing:0!==t?[3,0,0,0]:void 0},u.q_.createElement(A.A,{icon:"paper-clip",iconPrefix:"gravitysmtp-admin-icon",customClasses:["gravitysmtp-log-details__sidebar-item-icon"],spacing:[0,1,0,0]}),u.q_.createElement(k.A,{content:e.file_extension.toUpperCase(),customClasses:["gravitysmtp-log-details__sidebar-item-label"],size:"text-sm",spacing:[0,1,0,0],weight:"regular"}),u.q_.createElement(x.A,{href:e.file_path,target:"_blank"},u.q_.createElement(k.A,{color:"comet",content:e.file_name,customClasses:["gravitysmtp-log-details__sidebar-item-value"],size:"text-sm"})))})):null)};return rt.gravitysmtp_view_email_log_details&&u.q_.createElement("div",{className:"gravitysmtp-activity-log-app__log-details-wrapper",ref:t},u.q_.createElement(g.e7,{condition:ve.log_id,wrapper:function(e){return u.q_.createElement(C.A,{customClasses:["gravitysmtp-activity-log-app__log-details"],Header:lt,SecondaryContentChildren:_t,SideBarChildren:vt,sidebarMobilePosition:"start"},e)}},ve.log_id?null:u.q_.createElement(lt,null),u.q_.createElement(q.A,{HeaderContent:function(){return u.q_.createElement(u.q_.Fragment,null,u.q_.createElement(h.A,{content:Be,size:"text-lg",weight:"medium"}))},customClasses:["gravitysmtp-log-details__main-box"]},K.map(function(e){var t;return u.q_.createElement(y.A,{key:e,customClasses:["gravitysmtp-log-details__main-box-item"]},u.q_.createElement(h.A,{content:null==S||null===(t=S.log_detail)||void 0===t?void 0:t["main_box_".concat(e,"_label")],customClasses:["gravitysmtp-log-details__main-box-heading"],size:"text-sm",weight:"semibold"}),u.q_.createElement(k.A,{content:null==ve?void 0:ve[e],customClasses:["gravitysmtp-log-details__main-box-entry"],size:"text-sm"}))}))))});$.propTypes={common:u.By.object,data:u.By.object,i18n:u.By.object},$.displayName="LogDetailsScreen";var Q=$}}]);