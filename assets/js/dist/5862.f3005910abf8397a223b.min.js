"use strict";(self.webpackChunkgravitysmtp=self.webpackChunkgravitysmtp||[]).push([[5862],{36770:function(e,t,n){n.d(t,{A:function(){return c}});var a,o,i=n(40450),s=n.n(i),l=(null===(a=(0,n(21713).zj)(s(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},r=(null==l||null===(o=l.feature_flags)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.statuses)||{};function c(){return r[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||!1}},65862:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var a,o=n(90455),i=n(71860),s=n(8140),l=n(88856),r=n(78564),c=n.n(r),g=n(97867),_=n(48264),d=n(30242),u=n(80509),m=n(5529),b=n(87029),p=n(53377),f=n(66598),A=n(16265),v=n(82263),h=n(13379),y=n(84860),k=n(68381),E=n(27122),S=n.n(E),x=n(40450),C=n.n(x),T=n(60177),O=n(21713),w=n(83707),D=n(93313),P=(null===(a=(0,O.zj)(C(),"gravitysmtp_admin_config"))||void 0===a?void 0:a.common)||{},I=function(e){(0,e.addSnackbarMessage)(e.saveSuccessSnackBarMessage,"success")},z=function(e){var t=e.addSnackbarMessage,n=e.error,a=e.saveErrorSnackBarMessage;console.error(n),t(a,"error")},R=function(){var e=(0,o.A)(c().mark(function e(t){var n,a,o,i,s,l,r,g,_,d,u,m,b,p,f,A,v,h,y,k,E,x,C,R,M,G,L,j,B,N,V,U,W,H,J,X,q,F,K,Q,Y,Z,$,ee,te,ne,ae,oe,ie,se,le,re,ce;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.addSnackbarMessage,a=void 0===n?function(){}:n,o=t.errorCallback,i=void 0===o?null:o,s=t.snackBarErrorMessage,l=void 0===s?"":s,r=t.snackBarSuccessMessage,g=void 0===r?"":r,_=t.successCallback,d=void 0===_?null:_,u=t.type,m=void 0===u?"debug":u,b=t.useDebugLogger,p=void 0===b||b,f=P.i18n,v=(A=void 0===f?{}:f).debug_messages,y=(h=void 0===v?{}:v).deleting_activity_log_rows,k=void 0===y?"":y,E=h.deleting_activity_log_rows_error,x=void 0===E?"":E,C=h.deleting_all_debug_logs,R=void 0===C?"":C,M=h.deleting_all_debug_logs_error,G=void 0===M?"":M,L=A.snackbar_activity_log_delete_error,j=void 0===L?"":L,B=A.snackbar_activity_log_delete_success,N=void 0===B?"":B,V=A.snackbar_debug_log_delete_error,U=void 0===V?"":V,W=A.snackbar_debug_log_delete_success,H=void 0===W?"":W,J=P.endpoints,q=(X=void 0===J?{}:J).delete_events,K=(F=void 0===q?{}:q).action,Q=void 0===K?"":K,Y=F.nonce,Z=void 0===Y?"":Y,$=X.delete_debug_logs,te=(ee=void 0===$?{}:$).action,ne=void 0===te?"":te,ae=ee.nonce,oe=void 0===ae?"":ae,ie=g||"debug"===m?H:N,se=l||"debug"===m?U:j,le={action:"debug"===m?ne:Q,security:"debug"===m?oe:Z},"debug"===m?le.all_logs="1":(le.all_events="1",le.event_ids=[1]),!p){e.next=9;break}return e.next=9,(0,w.A)((0,O.nv)("debug"===m?R:k,JSON.stringify((0,D.A)(["security"],le))),"info");case 9:return e.prev=9,e.next=12,(0,T.bE)({endpoint:S(),body:le});case 12:null!=(ce=e.sent)&&null!==(re=ce.data)&&void 0!==re&&re.success?(d||I)({addSnackbarMessage:a,data:null==ce?void 0:ce.data,saveSuccessSnackBarMessage:ie}):(i||z)({addSnackbarMessage:a,error:null==ce?void 0:ce.error,saveErrorSnackBarMessage:se}),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(9),console.error(e.t0),a(se,"error"),!p){e.next=23;break}return e.next=23,(0,w.A)((0,O.nv)("debug"===m?G:x,JSON.stringify(e.t0)),"error");case 23:case"end":return e.stop()}},e,null,[[9,16]])}));return function(t){return e.apply(this,arguments)}}(),M=R,G=n(33695),L=n(49572),j=n(27764),B=n(36770),N=n(59092);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){(0,l.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W=g.React.forwardRef,H=g.React.useState,J=W(function(e,t){var n=e.customAttributes,a=void 0===n?{}:n,l=e.customClasses,r=void 0===l?[]:l,E=e.common,S=void 0===E?{}:E,x=e.data,C=void 0===x?{}:x,T=e.i18n,O=void 0===T?{}:T,w=U({className:(0,g.classnames)({"gravitysmtp-settings-app__logging":!0},r)},a),D=(null==O?void 0:O.logging)||{},P=D.debug_log_resources_alert,I=D.debug_log_retention_helper_text,z=D.debug_log_retention_label,R=D.debug_logging_box_heading,V=D.delete_activity_log_button_text,W=D.delete_debug_log_button_text,J=D.delete_debug_log_dialog_confirm_change_confirm,X=D.delete_debug_log_dialog_confirm_change_content,q=D.delete_debug_log_dialog_confirm_change_heading,F=D.delete_email_log_dialog_confirm_change_content,K=D.email_log_max_records_helper_text,Q=D.email_log_resources_alert,Y=D.email_log_retention_helper_text,Z=D.email_log_retention_label,$=D.enable_debug_log_helper_text,ee=D.enable_debug_log_label,te=D.enable_log_helper_text,ne=D.enable_log_label,ae=D.logging_box_heading,oe=D.logging_box_content,ie=D.save_attachments_helper_text,se=D.save_attachments_label,le=D.save_email_body_helper_text,re=D.save_email_body_label,ce=D.top_content,ge=D.top_heading,_e=D.track_open_label,de=D.track_open_helper_text,ue=D.view_activity_log_button_text,me=D.view_debug_log_button_text,be=(null==C?void 0:C.email_log_settings)||{},pe=be.email_log_enabled,fe=be.email_log_retention,Ae=be.email_log_url,ve=be.open_tracking_enabled,he=be.retention_options,ye=be.save_attachments_enabled,ke=be.save_email_body_enabled,Ee=(null==C?void 0:C.debug_log_settings)||{},Se=Ee.debug_log_retention,xe=Ee.debug_log_url,Ce=Ee.retention_options,Te=(0,N.default)(function(e){return e.debugLogEnabled}),Oe=(0,N.default)(function(e){return e.setDebugLogEnabled}),we=(0,N.default)(function(e){return e.setConfirmDialogSettings}),De=(0,N.default)(function(e){return e.setConfirmDialogOpen}),Pe=(0,y.dh)(),Ie=H(pe),ze=(0,s.A)(Ie,2),Re=ze[0],Me=ze[1];return g.React.createElement("div",(0,i.A)({},w,{ref:t}),g.React.createElement(m.A,{size:"display-sm",weight:"semibold",spacing:1,content:ge}),g.React.createElement(f.A,{size:"text-sm",spacing:6,color:"comet",content:ce}),(0,L.A)("CAPS_VIEW_EMAIL_LOG_SETTINGS")&&g.React.createElement(h.A,{HeaderContent:function(e){return g.React.createElement(d.A,{x:630},g.React.createElement(m.A,(0,i.A)({content:ae,tagName:"h2",size:"text-lg",weight:"medium",spacing:2},e)),g.React.createElement(f.A,(0,i.A)({content:oe,size:"text-sm",color:"comet"},e)))},spacing:6},g.React.createElement(d.A,{customClasses:["gravitysmtp-logging-settings__box-container"],x:630},g.React.createElement(A.A,{customAttributes:{"data-test-id":"settings-activity-log-enable"},helpTextAttributes:{content:te,size:"text-sm"},initialChecked:pe,labelAttributes:U({label:ne},(0,j.A)((0,G.A)("event_log_enabled"))),onChange:function(e){Me(e),(0,k.A)({addSnackbarMessage:Pe,key:(0,G.A)("event_log_enabled"),updateData:C.email_log_settings,value:e})},labelPosition:"left",name:(0,G.A)("event_log_enabled"),size:"size-m",width:"full",disabled:!(0,L.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),Re&&g.React.createElement(A.A,{customAttributes:{"data-test-id":"settings-save-email-body-enable"},helpTextAttributes:{content:le,size:"text-sm"},initialChecked:ke,labelAttributes:U({label:re},(0,j.A)((0,G.A)("save_email_body_enabled"))),onChange:function(e){(0,k.A)({addSnackbarMessage:Pe,key:(0,G.A)("save_email_body_enabled"),updateData:C.email_log_settings,value:e})},labelPosition:"left",name:(0,G.A)("save_email_body_enabled"),spacing:[6,0],size:"size-m",width:"full",disabled:!(0,L.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),Re&&g.React.createElement(A.A,{customAttributes:{"data-test-id":"settings-save-attachments-enable"},helpTextAttributes:{content:ie,size:"text-sm"},initialChecked:ye,labelAttributes:U({label:se},(0,j.A)((0,G.A)("save_attachments_enabled"))),onChange:function(e){(0,k.A)({addSnackbarMessage:Pe,key:(0,G.A)("save_attachments_enabled"),updateData:C.email_log_settings,value:e})},labelPosition:"left",name:(0,G.A)("save_attachments_enabled"),spacing:6,size:"size-m",width:"full",disabled:!(0,L.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),Re&&(0,B.A)("email_open_tracking")&&g.React.createElement(A.A,{customAttributes:{"data-test-id":"settings-track-open-enable"},helpTextAttributes:{content:de,size:"text-sm"},initialChecked:ve,labelAttributes:U({label:_e},(0,j.A)((0,G.A)("open_tracking"))),onChange:function(e){(0,k.A)({addSnackbarMessage:Pe,key:(0,G.A)("open_tracking"),updateData:C.email_log_settings,value:e})},labelPosition:"left",name:(0,G.A)("open_tracking"),spacing:6,size:"size-m",width:"full",disabled:!(0,L.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS")}),Re&&g.React.createElement(p.A,{customAttributes:{"data-test-id":"settings-email-log-retention"},wrapperClasses:[!C.email_log_settings.log_retention_period_enabled&&"gravitysmtp-logging-settings__log-retention--locked"],initialValue:fe,labelAttributes:U({label:Z},(0,j.A)((0,G.A)("event_log_retention"),!C.email_log_settings.log_retention_period_enabled)),helpTextAttributes:{content:C.email_log_settings.log_retention_period_enabled?Y:K,size:C.email_log_settings.log_retention_period_enabled?"text-xs":"text-sm"},name:(0,G.A)("event_log_retention"),onChange:function(e){(0,k.A)({addSnackbarMessage:Pe,showSnackBarSuccess:!0,key:(0,G.A)("event_log_retention"),updateData:C.email_log_settings,value:e})},options:he,disabled:!(0,L.A)("CAPS_EDIT_EMAIL_LOG_SETTINGS"),spacing:6}),Re&&g.React.createElement(v.A,{customClasses:["gravitysmtp-logging-settings__logging-alert"],customIconPrefix:"gravitysmtp-admin-icon",spacing:6,theme:"cosmos",type:"notice"},g.React.createElement(_.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:Q,tokens:[{component:b.A,key:"docs_link",props:{href:"https://docs.gravitysmtp.com/log-file-retention-periods/",target:"_blank"}}]})),Re&&g.React.createElement(d.A,{display:"flex",customClasses:["gravitysmtp-logging-settings__debug-log-buttons"]},(0,L.A)("CAPS_VIEW_EMAIL_LOG")&&g.React.createElement(b.A,{content:ue,customAttributes:{"data-test-id":"settings-activity-log-link"},customClasses:["gform-button","gform-button--size-height-m","gform-button--white","gform-button--width-auto","gform-button--icon-leading","gform-typography--size-text-sm","gform-typography--weight-medium"],href:Ae}),(0,L.A)("CAPS_DELETE_EMAIL_LOG")&&g.React.createElement(u.A,{customAttributes:{"data-test-id":"settings-activity-log-delete"},label:V,onClick:(0,o.A)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:we({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:J,confirm_change_content:F,confirm_change_heading:q},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return De(!1)},confirmDialogOnClose:function(){return De(!1)},confirmDialogOnConfirm:function(){var e=(0,o.A)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return De(!1),e.next=3,M({addSnackbarMessage:Pe,type:"email"});case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}},e)})),icon:"trash",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",size:"size-height-m",type:"amaranth-red"})))),(0,L.A)("CAPS_VIEW_DEBUG_LOG_SETTINGS")&&g.React.createElement(h.A,{HeaderContent:function(e){return g.React.createElement(m.A,(0,i.A)({content:R,tagName:"h2",size:"text-lg",weight:"medium"},e))}},g.React.createElement(d.A,{customClasses:["gravitysmtp-logging-settings__box-container"],x:630},g.React.createElement(A.A,{customAttributes:{"data-test-id":"settings-debug-log-enable"},initialChecked:Te,labelAttributes:U({label:ee},(0,j.A)((0,G.A)("debug_log_enabled"))),helpTextAttributes:{content:$,size:"text-sm"},onChange:function(e){Oe(e),(0,k.A)({addSnackbarMessage:Pe,key:(0,G.A)("debug_log_enabled"),successCallback:function(){C.debug_log_settings.debug_log_enabled=e,S.data.debug_log_enabled=e},value:e})},helpTextWidth:"full",labelPosition:"left",name:(0,G.A)("debug_log_enabled"),size:"size-m",width:"full",disabled:!(0,L.A)("CAPS_EDIT_DEBUG_LOG_SETTINGS")}),Te&&g.React.createElement(p.A,{initialValue:Se,labelAttributes:U({label:z},(0,j.A)((0,G.A)("debug_log_retention"))),helpTextAttributes:{content:I},name:(0,G.A)("debug_log_retention"),onChange:function(e){(0,k.A)({addSnackbarMessage:Pe,showSnackBarSuccess:!0,key:(0,G.A)("debug_log_retention"),updateData:C.debug_log_settings,value:e})},options:Ce,disabled:!(0,L.A)("CAPS_EDIT_DEBUG_LOG_SETTINGS"),spacing:[6,0]}),Te&&g.React.createElement(v.A,{customClasses:["gravitysmtp-logging-settings__logging-alert"],customIconPrefix:"gravitysmtp-admin-icon",spacing:6,theme:"cosmos",type:"notice"},g.React.createElement(_.Xx,{openingSymbol:"{{",closingSymbol:"}}",text:P,tokens:[{component:b.A,key:"docs_link",props:{href:"https://docs.gravitysmtp.com/log-file-retention-periods/",target:"_blank"}}]})),Te&&g.React.createElement(d.A,{display:"flex",customClasses:["gravitysmtp-logging-settings__debug-log-buttons"]},(0,L.A)("CAPS_VIEW_DEBUG_LOG")&&g.React.createElement(b.A,{content:me,customAttributes:{"data-test-id":"settings-debug-log-link"},customClasses:["gform-button","gform-button--size-height-m","gform-button--white","gform-button--width-auto","gform-button--icon-leading","gform-typography--size-text-sm","gform-typography--weight-medium"],href:xe}),(0,L.A)("CAPS_DELETE_DEBUG_LOG")&&g.React.createElement(u.A,{customAttributes:{"data-test-id":"settings-debug-log-delete"},label:W,onClick:(0,o.A)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:we({confirmDialogConfirmButtonType:"amaranth-red",confirmDialogI18n:{confirm_change_confirm:J,confirm_change_content:X,confirm_change_heading:q},confirmDialogOpen:!0,confirmDialogOnCancel:function(){return De(!1)},confirmDialogOnClose:function(){return De(!1)},confirmDialogOnConfirm:function(){var e=(0,o.A)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return De(!1),e.next=3,M({addSnackbarMessage:Pe});case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}},e)})),icon:"trash",iconPrefix:"gravitysmtp-admin-icon",iconPosition:"leading",size:"size-height-m",type:"amaranth-red"})))))});J.propTypes={customAttributes:g.PropTypes.object,customClasses:g.PropTypes.oneOfType([g.PropTypes.string,g.PropTypes.array,g.PropTypes.object])},J.displayName="LoggingScreen";var X=J}}]);